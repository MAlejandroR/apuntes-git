<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="es" class="no-js">
  <head><script src="/servicios/livereload.js?mindelay=10&amp;v=2&amp;port=44201&amp;path=servicios/livereload" data-no-instant defer></script>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="canonical" type="text/html" href="http://localhost:44201/servicios/es/docs/04_dns/">
<link rel="alternate" type="application/rss&#43;xml" href="http://localhost:44201/servicios/es/docs/04_dns/index.xml">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/servicios/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/servicios/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/servicios/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/servicios/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/servicios/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/servicios/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/servicios/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/servicios/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/servicios/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/servicios/favicons/android-192x192.png" sizes="192x192">

<title>Servidor DNS con BIND | Despliegue de Aplicaciones Web</title>
<meta name="description" content="Instalaci√≥n y configuraci√≥n de un servidor DNS utilizando BIND9 para la resoluci√≥n de nombres en red local.
">

<meta property="og:title" content="Servidor DNS con BIND" />
<meta property="og:description" content="Instalaci√≥n y configuraci√≥n de un servidor DNS utilizando BIND9 para la resoluci√≥n de nombres en red local.
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://localhost:44201/servicios/es/docs/04_dns/" />

<meta itemprop="name" content="Servidor DNS con BIND">
<meta itemprop="description" content="Instalaci√≥n y configuraci√≥n de un servidor DNS utilizando BIND9 para la resoluci√≥n de nombres en red local.
"><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Servidor DNS con BIND"/>
<meta name="twitter:description" content="Instalaci√≥n y configuraci√≥n de un servidor DNS utilizando BIND9 para la resoluci√≥n de nombres en red local.
"/>


<link href="/servicios/scss/main.css" rel="stylesheet">
<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>

  </head>
  <body class="td-section">
    <header>
      <nav class="td-navbar js-navbar-scroll "  data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row ">
  <a class="navbar-brand" href="/servicios/es/"><span class="navbar-brand__logo navbar-logo">
    <img src="/servicios/images/logo.png" alt="Logo" width="150" height="auto" />
    </span><span class="navbar-brand__name">Despliegue de Aplicaciones Web</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item dropdown d-none d-lg-block">
        <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Espa√±ol</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/servicios/en/">English</a></li>
    <li><a class="dropdown-item" href="/servicios/fr/">Franc√©s</a></li>
    </ul>
</div></li>
      <li class="td-light-dark-menu nav-item dropdown">
        <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
  <symbol id="check2" viewBox="0 0 16 16">
    <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
  </symbol>
  <symbol id="circle-half" viewBox="0 0 16 16">
    <path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"/>
  </symbol>
  <symbol id="moon-stars-fill" viewBox="0 0 16 16">
    <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
    <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
  </symbol>
  <symbol id="sun-fill" viewBox="0 0 16 16">
    <path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
  </symbol>
</svg>

<button class="btn btn-link nav-link dropdown-toggle d-flex align-items-center"
        id="bd-theme"
        type="button"
        aria-expanded="false"
        data-bs-toggle="dropdown"
        data-bs-display="static"
        aria-label="Toggle theme (auto)">
  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg>
</button>
<ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
  <li>
    <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
      <svg class="bi me-2 opacity-50"><use href="#sun-fill"></use></svg>
      Light
      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg>
    </button>
  </li>
  <li>
    <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
      <svg class="bi me-2 opacity-50"><use href="#moon-stars-fill"></use></svg>
      Dark
      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg>
    </button>
  </li>
  <li>
    <button type="button" class="dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
      <svg class="bi me-2 opacity-50"><use href="#circle-half"></use></svg>
      Auto
      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg>
    </button>
  </li>
</ul>

      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    
  </div>
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
Versi√≥n imprimible multipagina.
<a href="#" onclick="print();return false;">Haga click aqu√≠ para imprimir</a>.
</p><p>
<a href="/servicios/es/docs/04_dns/">Volver a la vista normal de esta p√°gina</a>.
</p>
</div>



<h1 class="title">Servidor DNS con BIND</h1>
<div class="lead">Instalaci√≥n y configuraci√≥n de un servidor DNS utilizando BIND9 para la resoluci√≥n de nombres en red local.</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-a0beb9f7a15cf85318ae0b811f50cca3">Instalaci√≥n</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2: <a href="#pg-58b7419fde94cadcdd42f0085c515df7">Configuraci√≥n Avanzada de BIND</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3: <a href="#pg-e70f69453789dd4e29465068f3ecc3bd">Comandos para dns</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>4: <a href="#pg-2f924b91564d17d9e0d461d693c6b856">Pr√°ctica</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>


<div class="content">
      




<div style="border: 1px solid darkgreen; border-radius: 5px; overflow: hidden;">
    <div style="background-color:darkgreen; color:white;
    font-weight:bold; padding:10px; display: flex; align-items: center;">
        
        <span style="margin-right: 8px;">
            
                <i class="fas fa-check-circle"></i> 
            
        </span>
        
        <span>Objetivos</span>
    </div>

    <h3 style="padding: 5px; font-weight:bold">Qu√© veremos aqu√≠</h3>

    <hr style="border-color:seagreen; border-width:3px"/>
    
    <div style="background-color:#d0f0d0; color:darkgreen; padding: 10px;">
        <ul>
            
            <li>Concepto de DNS</li>
            
            <li>Instalaci√≥n de servicio o aplicaci√≥n Bind</li>
            
            <li>Configuraci√≥n</li>
            
            <li>Puesta en marcha y uso </li>
            
            
            
        </ul>
    </div>
    


</div>

<hr style="border-color: red; border-width: 3px;"/>




<div style="border: 1px solid navy; border-radius: 5px; overflow: hidden;">
    <div style="background-color: navy; color: white;
    font-weight: bold; padding: 10px; display: flex; align-items: center;">
        
        <span style="margin-right: 8px;">
            
                <i class="fas fa-book"></i> 
            
        </span>
        
        <span>Referencias DNS</span>
    </div>

    <h3 style="padding: 5px; font-weight: bold; color: navy;">Documentaci√≥n Oficial y Recursos</h3>

    <hr style="border-color: lightblue; border-width: 3px"/>
    
    <div style="background-color: #e0f7fa; color: navy; padding: 10px;">
        <ul>
            
            <li><ul>
<li><a href="https://www.isc.org/bind/">Documentaci√≥n oficial de BIND9</a></li>
</ul>
</li>
            
            <li><ul>
<li><a href="https://tools.ietf.org/html/rfc1034">RFC 1034 - Domain Names - Concepts and Facilities</a></li>
</ul>
</li>
            
            <li><ul>
<li><a href="https://tools.ietf.org/html/rfc1035">RFC 1035 - Domain Names - Implementation and Specification</a></li>
</ul>
</li>
            
            <li></li>
            
            
        </ul>
    </div>
</div>

<hr style="border-color: red; border-width: 3px;"/>
<h1 id="introducci√≥n-al-servicio-dns">Introducci√≥n al Servicio DNS</h1>
<div class="definicion-concepto">
  <div class="definicion-titulo">
    
    <i class="fas fa-book" aria-hidden="true"></i>
    
    <strong>DNS</strong>
  </div>
  <div class="definicion-contenido ">
      <ul>
        
        <li>El Sistema de Nombres de Dominio (DNS) es un servicio fundamental en Internet.   </li>
        
        <li>Corresponde a la capa de aplicaci√≥n y tiene asociado el puerto  52.</li>
        
        <li>Traduce nombres de dominio legibles por humanos en direcciones IP que las m√°quinas pueden entender y procesar.</li>
        
        
        
      </ul>
  </div>
</div>
<h2 id="conceptos-b√°sicos-de-dns">Conceptos B√°sicos de DNS</h2>


<div class="alert alert-info" role="alert">
<h4 class="alert-heading">Componentes principales</h4>

    <ul>
<li><strong>Servidor DNS</strong>: Software que responde a las consultas de resoluci√≥n de nombres</li>
<li><strong>Registros DNS</strong>: Entradas que asocian nombres con direcciones IP u otros datos</li>
<li><strong>Zonas DNS</strong>: Porciones del espacio de nombres de dominio</li>
<li><strong>Cache DNS</strong>: Almacenamiento temporal de resoluciones previas</li>
</ul>


</div>

<p>

<strong>
<span class="font-weight-bold text-primary fs-1.5">

    Protocolos de capa inferior


</span>
</strong>

DNS utiliza de capas inferiores principalmente UDP, pero tambi√©n puede usar TCP:</p>
<ul>
<li><strong>Puerto 53 (UDP y TCP)</strong> ‚Üí Se usa para resolver nombres de dominio en direcciones IP.</li>
<li><strong>UDP 53</strong> ‚Üí Se utiliza principalmente para consultas normales de DNS porque es m√°s r√°pido y eficiente.</li>
<li><strong>TCP 53</strong> ‚Üí Se usa cuando la respuesta es demasiado grande para caber en un paquete UDP o para operaciones m√°s seguras como transferencias de zona (AXFR/IXFR).</li>
</ul>
<h2 id="bind-berkeley-internet-name-domain">BIND (Berkeley Internet Name Domain)</h2>
<p>

<strong>
<span class="font-weight-bold text-primary fs-1.5">

    BIND


</span>
</strong>
 es el servidor (aplicaci√≥n que instalaremos) DNS m√°s utilizado en Internet, especialmente en sistemas Unix/Linux. Proporciona una implementaci√≥n completa del protocolo DNS.
Bind9, implementa el protocolo DNS.</p>
<p>Basa su funcionamiento en 

<strong>
<span class="font-weight-bold text-primary fs-1.5">

    un  sistema de nombres jer√°rquico


</span>
</strong>
 (vs espacio de nombre planos, que tenemos en el fichero hosts, inmanejable dado el tama√±o de internet), que  

<strong>
<span class="font-weight-bold text-primary fs-1.5">

    tiene estructura de √°rbol


</span>
</strong>
 de forma que cada nodo del √°rbol tiene un significado.</p>
<table>
<thead>
<tr>
<th>Objetivo</th>
<th>Sistema jerarquizado</th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="img_1.png" src="/servicios/es/docs/04_dns/img_1.png"></td>
<td><img alt="img.png" src="/servicios/es/docs/04_dns/img.png"></td>
</tr>
</tbody>
</table>
<p>

<strong>
<span class="font-weight-bold text-primary fs-1.5">

    El sistema de nombres de dominio


</span>
</strong>
es un sistema de nombres jer√°rquico y distribuido.</p>
<p>La estructura del sistema de nombres de dominio en una estructura en forma de √°rbol. Cada nodo del √°rbol se llama 

<strong>
<span class="font-weight-bold text-primary fs-1.5">

    nombre de dominio


</span>
</strong>
 y consiste en una etiqueta de hastac    63 caracteres.


<div class="alert alert-success" role="alert">
<h4 class="alert-heading">estructura del √°rbol</h4>

    <ul>
<li>La ra√≠z del √°rbol siempre es un <strong>PUNTO</strong>.</li>
<li>A la etiqueta de segundo nivel se le llama dominio de nivel superior o <strong>Top Level Domain (TLD)</strong>.</li>
<li><strong>El extremo de la bifurcaci√≥n se denomina host</strong> y corresponde a un equipo en la red.</li>
</ul>


</div>



<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">FQDN</h4>

    <p><strong>FQDN (Nombre de Dominio totalmente calificado)</strong>  es la direcci√≥n que corresponde con todas las etiquetas de nodo de una estructura arb√≥rea, separadas por puntos y que termina con un punto final.</p>
<p>La profundidad m√°xima de una estructura arb√≥rea es 127 niveles y la longitud m√°xima para un nombre FQDN es 255 caracteres.</p>


</div>

<img alt="img_3.png" src="/servicios/es/docs/04_dns/img_3.png"></p>
<hr style="border-color: red; border-width: 3px;"/>
<p><img alt="img_4.png" src="/servicios/es/docs/04_dns/img_4.png"></p>
<p>Por ejemplo el espacio de nombres de los ficheros en disco (se pueden crear ficheros con el mismo nombre siempre que est√©n en otra carpeta)
A continuaci√≥n vamos a proceder a instalarlo y configurarlo</p>
<p><strong>El Centro de Informaci√≥n de la Red Internet (Internet Network Information Center)</strong> 

<strong>
<span class="font-weight-bold text-primary fs-1.5">

    administra


</span>
</strong>
 la ra√≠z de la base de datos DNS en Internet.</p>
<p>Los dominios superiores se han asignado a organizaciones y pa√≠ses. Estos nombres de dominio siguen un est√°ndar internacional. Para los pa√≠ses se usan abreviaturas de dos y de tres letras (es, it, de‚Ä¶), y se han reservado varias abreviaturas para que las usen las organizaciones, como se muestra en los siguientes ejemplos:</p>
<p><img alt="img_5.png" src="/servicios/es/docs/04_dns/img_5.png"></p>
<h2 id="resoluci√≥n-de-nombres-de-dominio">Resoluci√≥n de nombres de dominio</h2>
<p>La estructura del √°rbol, ya comentada anteriormente,est√° fomrada por nodos interconectos</p>
<p><div class="definicion-concepto">
  <div class="definicion-titulo">
    
    <i class="fas fa-network-wired" aria-hidden="true"></i>
    
    <strong>Dominio</strong>
  </div>
  <div class="definicion-contenido ">
      <ul>
        
        <li>Cada nodo del √°rbol de una base de datos DNS, junto con todos los nodos por debajo del mismo</li>
        
        
        <li>Los dominios pueden contener host (equipos) y otros dominios (subdominios).</li>
        
        
        
      </ul>
  </div>
</div>
Por ejemplo, el dominio Midominio (midominio.com), podr√≠a contener a la vez equipos, como host.midominio.com, y subdominios, como subdom.midominio.com, que a su vez podr√≠a contener host, como por ejemplo host.subdom.midominio.com.</p>
<hr style="border-color: red; border-width: 3px;"/>
<div class="definicion-concepto">
  <div class="definicion-titulo">
    
    <i class="fas fa-server" aria-hidden="true"></i>
    
    <strong>Servidores de nombres de dominio</strong>
  </div>
  <div class="definicion-contenido ">
      <ul>
        
        <li>Equipos  que permiten establecer la relaci√≥n entre los nombres de dominio y las direcciones IP de los equipos de una red.</li>
        
        
        
      </ul>
  </div>
</div>
<p>

<strong>
<span class="font-weight-bold text-primary fs-1.5">

    El sistema de servidores de nombres de dominio


</span>
</strong>
 es una <strong>arquitectura jer√°quica y distribuida</strong>, y permite su administraci√≥n descentralizada mediante la delegaci√≥n de dominios. Es decir como no habr√≠a un ordenador tan potente como para traducir todos los nombres de todos los ordenadores de Internet, lo que se hizo es que existen <strong>varios servidores DNS</strong> que trabajan de forma <em>jer√°rquica y deleg√°ndose tareas unos en otros</em>.  Cada  servidor DNS almacena informaci√≥n acerca de algunas partes del espacio de nombres del dominio. Cada una de esas partes se llama zona. <strong>Se dice el servidor DNS tiene autoridad sobre una o varias zonas</strong>.
<img alt="img_6.png" src="/servicios/es/docs/04_dns/img_6.png"></p>
<div class="definicion-concepto">
  <div class="definicion-titulo">
    
    <i class="fas fa-exchange-alt" aria-hidden="true"></i>
    
    <strong>Delegacion de dominios</strong>
  </div>
  <div class="definicion-contenido ">
      <ul>
        
        <li>La delegaci√≥n de dominios es el proceso mediante el cual un servidor de nombres de dominio (DNS) transfiere la autoridad de resoluci√≥n de una parte de un dominio (una zona DNS) a otro servidor.</li>
        
        
        <li>Esto permite dividir un dominio en subdominios y asignar su gesti√≥n a servidores diferentes, manteniendo una estructura jer√°rquica y distribuida.</li>
        
        
        
      </ul>
  </div>
</div>
<p><img alt="img_7.png" src="/servicios/es/docs/04_dns/img_7.png"></p>
<hr style="border-color: red; border-width: 3px;"/>
<p><img alt="img_8.png" src="/servicios/es/docs/04_dns/img_8.png"></p>
<hr style="border-color: red; border-width: 3px;"/>
<p><img alt="img_9.png" src="/servicios/es/docs/04_dns/img_9.png"></p>
<hr style="border-color: red; border-width: 3px;"/>
<p>Los servidores relacionados con <strong>los dominios de nivel superior (TLD)</strong> se llaman 

<strong>
<span class="font-weight-bold text-primary fs-1.5">

    servidores de dominio de nivel superior


</span>
</strong>
.
Son <strong>13</strong>, est√°n distribuidos por todo el mundo y sus nombres van desde 

<strong>
<span class="font-weight-bold text-primary fs-1.5">

    a.root-servers.net


</span>
</strong>
 hasta 

<strong>
<span class="font-weight-bold text-primary fs-1.5">

    m.root-servers.net


</span>
</strong>
.</p>
<p><img alt="img_10.png" src="/servicios/es/docs/04_dns/img_10.png"></p>
<h3 id="clasificaci√≥n-de-tipos-de-serividores-dns">Clasificaci√≥n de tipos de serividores DNS</h3>
<p>Hay 3 tipos de servidores DNS.</p>
<ul>
<li>

<strong>
<span class="font-weight-bold text-primary fs-1.5">

    Servidores primarios (maestros)


</span>
</strong>
</li>
</ul>
<blockquote>
<p>La informaci√≥n de una zona la obtienen de sus archivos locales. Todas las modificaciones sobre una zona (a√±adir dominios, modificarlos, etc) se llevan a cabo en el servidor primario.</p>
</blockquote>
<ul>
<li>

<strong>
<span class="font-weight-bold text-primary fs-1.5">

    Servidores secundarios (esclavos)


</span>
</strong>
</li>
</ul>
<blockquote>
<p>Contiene una copia de s√≥lo lectura de los archivos de zona de los servidores maestros con autoridad sobre esas zonas.</p>
</blockquote>
<blockquote>
<p>Cuando la informaci√≥n del servidor primario cambia, el esclavo la copia para actualizarse. Al proceso mediante el cual se obtiene informaci√≥n actualizada de la zona a trav√©s de internet se le llama ‚Äútransferencia de zona‚Äù.</p>
</blockquote>
<ul>
<li>

<strong>
<span class="font-weight-bold text-primary fs-1.5">

    Servidores cach√©


</span>
</strong>
</li>
</ul>
<blockquote>
<p>Cuando se les hace una consulta, si no tiene la respuesta, la reenv√≠an a los servidores que puedan responder. Al recibir la respuesta la almacenan en cach√© para poder usarla en sucesivas peticiones.</p>
</blockquote>
<blockquote>
<p>Si se almacena la informaci√≥n en el servidor cach√© por mucho tiempo, la info puede estar desactualizada, pero si se almacena muy poco tiempo, mayor carga para el sevidor de nombres. Hay que mirar lo que sea mejor para cada caso. Esto es el TTL o Time To Live (Tiempo de vida).</p>
</blockquote>
<h3 id="proceso-de-resoluci√≥n-de-un-nombre-de-dominio">Proceso de resoluci√≥n de un nombre de dominio</h3>
<p>El proceso de resoluci√≥n de un nombre de dominio sigue una serie de pasos estructurados que permiten encontrar la direcci√≥n IP asociada a un dominio.</p>
<h4 id="1-consulta-al-archivo-de-hosts-local">1. Consulta al archivo de hosts local</h4>
<p>El sistema operativo primero busca el nombre de dominio en el archivo de configuraci√≥n local:</p>
<ul>
<li>En <strong>Linux/macOS</strong>: <code>/etc/hosts</code></li>
<li>En <strong>Windows</strong>: <code>C:\Windows\System32\drivers\etc\hosts</code></li>
</ul>
<blockquote>
<p>Si el dominio se encuentra en este archivo, se usa la direcci√≥n IP correspondiente y el proceso termina aqu√≠.</p>
</blockquote>
<h4 id="2-consulta-a-la-cach√©-del-sistema-y-del-navegador">2. Consulta a la cach√© del sistema y del navegador</h4>
<p>Si el dominio no est√° en el archivo <code>hosts</code>, el sistema verifica su <strong>cach√© DNS local</strong>, en el caso de que  la direcci√≥n se haya resuelto recientemente, estar√° aqu√≠.</p>
<ul>
<li>El navegador suele tener  su propia cach√© DNS, que puede evitar consultas adicionales al sistema operativo.</li>
<li>El sistema operativo tambi√©n mantiene una cach√© DNS local (ejemplo: systemd-resolved en Linux, dnscache en .</li>
</ul>
<blockquote>
<p>Si alguna cach√© contiene la respuesta, el proceso finaliza aqu√≠.</p>
</blockquote>
<h4 id="3-consulta-al-servidor-dns-configurado">3. Consulta al servidor DNS configurado</h4>
<p>Si el dominio no est√° en la cach√©, el sistema consulta el <strong>servidor DNS configurado</strong> (normalmente el del proveedor de Internet o un DNS p√∫blico como Google <code>8.8.8.8</code> o Cloudflare <code>1.1.1.1</code>), pero tambi√©n podr√≠a ser un servidor interno.</p>


<strong>
<span class="font-weight-bold text-primary fs-1.5">

    El servidor DNS puede actuar de tres maneras:


</span>
</strong>

<ol>
<li><strong>Responder con la direcci√≥n IP</strong> si la tiene almacenada en su cach√©.</li>
<li><strong>Delegar la consulta</strong> a otro servidor DNS si no tiene la informaci√≥n.</li>
<li><strong>Realizar una consulta recursiva</strong> para encontrar la respuesta.</li>
</ol>
<h4 id="4-resoluci√≥n-jer√°rquica-en-los-servidores-dns">4. Resoluci√≥n jer√°rquica en los servidores DNS</h4>
<p>Si el servidor DNS consultado no conoce la direcci√≥n, sigue el <strong>modelo jer√°rquico de DNS</strong>:</p>
<ol>
<li><strong>Servidor ra√≠z (Root DNS)</strong> ‚Üí Responde con la direcci√≥n de los servidores de dominio de nivel superior (TLD, como <code>.com</code>, <code>.org</code>, <code>.es</code>).</li>
<li><strong>Servidor TLD</strong> ‚Üí Responde con la direcci√≥n del servidor autoritativo del dominio solicitado.</li>
<li><strong>Servidor autoritativo</strong> ‚Üí Contiene la informaci√≥n definitiva sobre el dominio y devuelve la direcci√≥n IP.</li>
</ol>
<p><strong>Una vez encontrada la direcci√≥n, se env√≠a al usuario y se almacena en cach√© para futuras consultas.</strong></p>
<h3 id="ejecuci√≥n-iterativa-o-jerarquica-vs-recursiva">Ejecuci√≥n iterativa o jerarquica Vs recursiva</h3>
<p>Existen <strong>dos tipos de resoluci√≥n DNS principales</strong>: <strong>iterativa (jer√°rquica)</strong> y <strong>recursiva</strong>, que quedan establecidas en los puntos 3 y 4 anteriores.</p>


<strong>
<span class="font-weight-bold text-primary fs-1.5">

    Resoluci√≥n iterativa (jerarquizada)


</span>
</strong>

<blockquote>
<p>Este proceso se basa en que el servidor DNS <strong>no realiza la resoluci√≥n completa</strong>, sino que va consultando diferentes servidores DNS en la jerarqu√≠a hasta obtener una respuesta.</p>
</blockquote>
<blockquote>
<p><img alt="img_11.png" src="/servicios/es/docs/04_dns/img_11.png"></p>
</blockquote>
<blockquote>
<ul>
<li>Flujo del proceso iterativo:</li>
</ul>
<blockquote>
<ol>
<li><strong>El servidor DNS local consulta un servidor ra√≠z (root DNS).</strong></li>
<li><strong>El servidor ra√≠z responde con el servidor DNS del dominio de nivel superior (TLD, como .es, .com, .org, etc.).</strong></li>
<li><strong>El servidor DNS local consulta al servidor del TLD (por ejemplo, el DNS de <code>.es</code>).</strong></li>
<li><strong>El servidor TLD responde con la direcci√≥n del servidor DNS del dominio (por ejemplo, <code>upc.es</code>).</strong></li>
<li><strong>El servidor DNS local consulta al servidor DNS autoritativo del dominio (<code>upc.es</code>).</strong></li>
<li><strong>El servidor autoritativo devuelve la direcci√≥n IP solicitada.</strong></li>
<li><strong>El servidor inicial informa al cliente con la direcci√≥n IP encontrada.</strong></li>
</ol>
</blockquote>
</blockquote>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Importante</h4>

    En este caso, <strong>el servidor inicial (DNS local) no resuelve directamente el dominio, sino que recibe referencias hasta llegar al servidor autoritativo</strong>.

</div>



<strong>
<span class="font-weight-bold text-primary fs-1.5">

    Resoluci√≥n recursiva


</span>
</strong>

<blockquote>
<p>En este caso, el servidor DNS <strong>se encarga de resolver completamente la consulta por el cliente</strong> y solo le devuelve la direcci√≥n IP final.</p>
</blockquote>
<blockquote>
<p><img alt="img_12.png" src="/servicios/es/docs/04_dns/img_12.png"></p>
</blockquote>
<blockquote>
<ul>
<li>Flujo del proceso recursivo:</li>
</ul>
</blockquote>
<blockquote>
<blockquote>
<ol>
<li><strong>El cliente (host) consulta su servidor DNS configurado.</strong></li>
<li><strong>Este servidor DNS consulta a un servidor ra√≠z para obtener la informaci√≥n.</strong></li>
<li><strong>El servidor ra√≠z responde con la direcci√≥n del servidor TLD (<code>.es</code>).</strong></li>
<li><strong>El servidor DNS consulta al TLD y obtiene la direcci√≥n del servidor DNS del dominio (<code>upc.es</code>).</strong></li>
<li><strong>El servidor DNS consulta al servidor autoritativo (<code>ftp.upc.es</code>) y obtiene la IP.</strong></li>
<li><strong>El servidor DNS devuelve la IP al cliente.</strong></li>
</ol>
</blockquote>
</blockquote>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Importante</h4>

    En este caso, <strong>el cliente solo pregunta una vez y el servidor DNS hace todo el trabajo de resoluci√≥n hasta obtener la IP</strong>.

</div>

<hr>
<h2 id="-comparaci√≥n-r√°pida">üìä Comparaci√≥n r√°pida</h2>
<table>
<thead>
<tr>
<th><strong>Tipo de Resoluci√≥n</strong></th>
<th><strong>Qui√©n resuelve la consulta</strong></th>
<th><strong>Proceso</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Iterativa (jer√°rquica)</strong></td>
<td>El cliente DNS sigue referencias hasta obtener la respuesta.</td>
<td>El cliente pregunta a varios servidores DNS hasta llegar al autoritativo.</td>
</tr>
<tr>
<td><strong>Recursiva</strong></td>
<td>El servidor DNS configurado resuelve completamente y responde al cliente.</td>
<td>El cliente solo hace una consulta y el servidor se encarga de todo.</td>
</tr>
</tbody>
</table>
<hr>

</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-a0beb9f7a15cf85318ae0b811f50cca3">1 - Instalaci√≥n</h1>
    <div class="lead">Instalaci√≥n y configuraci√≥n de un servidor DNS utilizando BIND9 para la resoluci√≥n de nombres en red local.
Fichero involucrados</div>
	




<div style="border: 1px solid darkgreen; border-radius: 5px; overflow: hidden;">
    <div style="background-color:darkgreen; color:white;
    font-weight:bold; padding:10px; display: flex; align-items: center;">
        
        <span style="margin-right: 8px;">
            
                <i class="fas fa-check-circle"></i> 
            
        </span>
        
        <span>Objetivos</span>
    </div>

    <h3 style="padding: 5px; font-weight:bold">Qu√© veremos aqu√≠</h3>

    <hr style="border-color:seagreen; border-width:3px"/>
    
    <div style="background-color:#d0f0d0; color:darkgreen; padding: 10px;">
        <ul>
            
            <li>Concepto de DNS</li>
            
            <li>Instalaci√≥n de servicio o aplicaci√≥n Bind</li>
            
            <li>Configuraci√≥n</li>
            
            <li>Puesta en marcha y uso </li>
            
            
            
        </ul>
    </div>
    


</div>

<h1 id="introducci√≥n-al-servicio-dns">Introducci√≥n al Servicio DNS</h1>
<h1 id="instalaci√≥n-y-configuraci√≥n">Instalaci√≥n y Configuraci√≥n</h1>


<strong>
<span class="font-weight-bold text-primary fs-1.5">

    Virtualizaci√≥n para pruebas


</span>
</strong>

<p>Creamos un entorno para realizar pruebas y pr√°cticas de nuestro entorno de ejecuci√≥n.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code><span style="background-color:#3c3d38"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-ruby" data-lang="ruby"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#66d9ef">Vagrant</span><span style="color:#f92672">.</span>configure(<span style="color:#e6db74">&#34;2&#34;</span>) <span style="color:#66d9ef">do</span> <span style="color:#f92672">|</span>config<span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span>  config<span style="color:#f92672">.</span>vm<span style="color:#f92672">.</span>box <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ubuntu/focal64&#34;</span>
</span></span><span style="display:flex;"><span>  config<span style="color:#f92672">.</span>vm<span style="color:#f92672">.</span>hostname <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;dns-server&#34;</span>
</span></span><span style="display:flex;"><span>  config<span style="color:#f92672">.</span>vm<span style="color:#f92672">.</span>network <span style="color:#e6db74">&#34;private_network&#34;</span>, <span style="color:#e6db74">ip</span>: <span style="color:#e6db74">&#34;192.168.33.10&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span></span></span></code></pre></td></tr></table>
</div>
</div>
<h2 id="instalaci√≥n-de-bind9">Instalaci√≥n de BIND9</h2>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt update
</span></span><span style="display:flex;"><span>sudo apt install bind9 bind9utils bind9-doc</span></span></code></pre></td></tr></table>
</div>
</div>
<h2 id="configuraci√≥n-b√°sica">Configuraci√≥n B√°sica</h2>
<p>Los archivos principales de configuraci√≥n se encuentran en 

<strong>
<span class="font-weight-bold text-primary fs-1.5">

    /etc/bind/


</span>
</strong>
:</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>/etc/bind/
</span></span><span style="display:flex;"><span>‚îú‚îÄ‚îÄ named.conf          # Configuraci√≥n principal
</span></span><span style="display:flex;"><span>‚îú‚îÄ‚îÄ named.conf.local    # Zonas locales
</span></span><span style="display:flex;"><span>‚îú‚îÄ‚îÄ named.conf.options  # Opciones globales
</span></span><span style="display:flex;"><span>‚îî‚îÄ‚îÄ zones/             # Directorio para archivos de zona</span></span></code></pre></td></tr></table>
</div>
</div>
<p>Ahora vamos comprendiendo cada uno de esos ficheros, entendiendo su funcionalidad y contenido.</p>
<h3 id="namedconf">named.conf</h3>
<p>El archivo <strong><code>named.conf</code></strong> se encuentra en <code>/etc/bind/</code> y su funci√≥n principal es 

<strong>
<span class="font-weight-bold text-primary fs-1.5">

    cargar el resto de archivos de configuraci√≥n


</span>
</strong>
:</p>
<ul>
<li><strong>named.conf.options</strong></li>
<li><strong>named.conf.local</strong>.</li>
</ul>
<hr style="border-color: red; border-width: 3px;"/>
<p>

<strong>
<span class="font-weight-bold text-primary fs-1.5">

    Ejemplo de named.conf


</span>
</strong>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>include &#34;/etc/bind/named.conf.options&#34;;  # Configuraci√≥n global
</span></span><span style="display:flex;"><span>include &#34;/etc/bind/named.conf.local&#34;;    # Configuraci√≥n de zonas</span></span></code></pre></td></tr></table>
</div>
</div></p>
<hr style="border-color: red; border-width: 3px;"/>
<h2 id="2-configuraci√≥n-de-opciones-globales-namedconfoptions"><strong>2. Configuraci√≥n de Opciones Globales (<code>named.conf.options</code>)</strong></h2>
<p>El archivo <strong><code>named.conf.options</code></strong> define las opciones globales del servidor DNS, como el comportamiento de recursi√≥n, los permisos de consulta y los mecanismos de seguridad.</p>
<p>La principales directivas de  <strong>named.conf.options</strong></p>
<blockquote>
<ul>
<li><strong><code>directory</code></strong></li>
</ul>
<blockquote>
<p>Define el directorio donde se almacenan los archivos del servidor DNS.
Importante para saber d√≥nde se ubican los ficheros de zonas</p>
</blockquote>
<ul>
<li><strong><code>listen-on</code></strong></li>
</ul>
<blockquote>
<p>Especifica en qu√© interfaces IP el servidor DNS escucha peticiones.
Esta directiva es fundamental y muy importante</p>
</blockquote>
<ul>
<li><strong><code>allow-query</code></strong></li>
</ul>
<blockquote>
<p>Controla qu√© clientes pueden realizar consultas DNS.</p>
</blockquote>
<ul>
<li><strong><code>allow-recursion</code></strong></li>
</ul>
<blockquote>
<p>Permite definir qu√© clientes pueden hacer consultas recursivas.</p>
</blockquote>
<ul>
<li><strong><code>recursion</code></strong></li>
</ul>
<blockquote>
<p>Habilita o deshabilita la recursi√≥n en el servidor DNS.</p>
</blockquote>
<ul>
<li><strong><code>forwarders</code></strong></li>
</ul>
<blockquote>
<p>Especifica servidores DNS externos a los que se reenviar√°n las consultas.</p>
</blockquote>
<ul>
<li><strong><code>allow-transfer</code></strong></li>
</ul>
<blockquote>
<p>Determina qu√© servidores pueden solicitar transferencias de zona.</p>
</blockquote>
<ul>
<li><strong><code>dnssec-validation</code></strong></li>
</ul>
<blockquote>
<p>Controla la validaci√≥n de DNSSEC para la seguridad de las respuestas.</p>
</blockquote>
<ul>
<li><strong><code>max-cache-size</code></strong></li>
</ul>
<blockquote>
<p>Establece un l√≠mite en el tama√±o de la cach√© de consultas DNS.</p>
</blockquote>
<ul>
<li><strong><code>max-clients-per-query</code></strong></li>
</ul>
<blockquote>
<p>Define el n√∫mero m√°ximo de clientes que pueden realizar una consulta simult√°neamente.</p>
</blockquote>
<ul>
<li><strong><code>rate-limit</code></strong></li>
</ul>
<blockquote>
<p>Configura restricciones en la frecuencia de respuestas a consultas para mitigar ataques.</p>
</blockquote>
</blockquote>
<details>
    <summary>Directivas importantes</summary>
    <div class="solution-content">
<ul>
<li>
<p><strong>listen-on</strong> ‚Üí Para que el DNS escuche en la IP de la VM.</ol></p>
</li>
<li>
<p><strong>allow-query</strong> ‚Üí Para permitir consultas desde la red privada de Vagrant.</p>
</li>
<li>
<p><strong>allow-recursion</strong> ‚Üí Para permitir que la VM haga consultas recursivas.</p>
</li>
<li>
<p><strong>recursion</strong> ‚Üí Si queremos que el servidor resuelva nombres fuera de su zona.</p>
</li>
<li>
<p><strong>forwarders</strong> ‚Üí Para reenviar consultas a servidores externos si es necesario.</p>
</li>
<li>
<p><strong>directory</strong> ‚Üí Para definir la ubicaci√≥n de los archivos de zona.</p>
</li>
</ul>
</details>
<style>
    .solution-content {
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-top: 5px;
        background-color: #f9f9f9;
    }
    summary {
        cursor: pointer;
        font-weight: bold;
        color: #0073e6;
    }
</style>
<hr style="border-color: red; border-width: 3px;"/>
<hr style="border-color: red; border-width: 3px;"/>
<p>

<strong>
<span class="font-weight-bold text-primary fs-1.5">

    Ejemplo de configuraci√≥n en <code>named.conf.options</code>


</span>
</strong>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>options {
</span></span><span style="display:flex;"><span>    directory &#34;/var/cache/bind&#34;;
</span></span><span style="display:flex;"><span>    recursion yes;
</span></span><span style="display:flex;"><span>    allow-recursion { localhost; 192.168.33.0/24; };
</span></span><span style="display:flex;"><span>    listen-on { 192.168.33.10; };
</span></span><span style="display:flex;"><span>    allow-transfer { none; };
</span></span><span style="display:flex;"><span>    dnssec-validation auto;
</span></span><span style="display:flex;"><span>};</span></span></code></pre></td></tr></table>
</div>
</div></p>
<hr style="border-color: red; border-width: 3px;"/>
<h2 id="3-configuraci√≥n-de-zonas-locales-namedconflocal"><strong>3. Configuraci√≥n de Zonas Locales (<code>named.conf.local</code>)</strong></h2>
<p>El archivo <strong><code>named.conf.local</code></strong> se utiliza para definir las zonas locales del servidor DNS. Aqu√≠ es donde se configuran los dominios espec√≠ficos que el servidor gestionar√°.</p>
<h3 id="directivas-principales-en-namedconflocal"><strong>Directivas principales en <code>named.conf.local</code></strong></h3>
<blockquote>
<ul>
<li><strong><code>zone</code></strong></li>
</ul>
<blockquote>
<p>Define una zona DNS y su configuraci√≥n.</p>
</blockquote>
<ul>
<li><strong><code>type</code></strong></li>
</ul>
<blockquote>
<p>Especifica si la zona es <strong>maestra</strong>, <strong>esclava</strong> o <strong>reenviadora</strong>.</p>
</blockquote>
<ul>
<li><strong><code>file</code></strong></li>
</ul>
<blockquote>
<p>Indica el archivo donde se almacena la configuraci√≥n de la zona.</p>
</blockquote>
<ul>
<li><strong><code>allow-update</code></strong></li>
</ul>
<blockquote>
<p>Controla qu√© servidores pueden actualizar din√°micamente la zona.</p>
</blockquote>
<ul>
<li><strong><code>allow-transfer</code></strong></li>
</ul>
<blockquote>
<p>Especifica qu√© servidores pueden recibir transferencias de zona.</p>
</blockquote>
<ul>
<li><strong><code>masters</code></strong></li>
</ul>
<blockquote>
<p>En zonas esclavas, indica los servidores maestros autorizados.</p>
</blockquote>
<ul>
<li><strong><code>forwarders</code></strong></li>
</ul>
<blockquote>
<p>Define servidores a los que se reenviar√°n consultas de esta zona espec√≠fica.</p>
</blockquote>
<ul>
<li><strong><code>check-names</code></strong></li>
</ul>
<blockquote>
<p>Determina si los nombres de la zona deben cumplir con los est√°ndares DNS.</p>
</blockquote>
<ul>
<li><strong><code>notify</code></strong></li>
</ul>
<blockquote>
<p>Indica si el servidor debe notificar cambios a los secundarios.</p>
</blockquote>
</blockquote>
<hr style="border-color: red; border-width: 3px;"/>
<p>

<strong>
<span class="font-weight-bold text-primary fs-1.5">

    Ejemplo de configuraci√≥n en <code>named.conf.local</code>


</span>
</strong>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>    zone &#34;inf.com&#34; {
</span></span><span style="display:flex;"><span>    type master;
</span></span><span style="display:flex;"><span>    file &#34;/etc/bind/zones/db.inf.com&#34;;
</span></span><span style="display:flex;"><span>    allow-update { none; };
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>zone &#34;33.168.192.in-addr.arpa&#34; {
</span></span><span style="display:flex;"><span>    type master;
</span></span><span style="display:flex;"><span>    file &#34;/etc/bind/zones/db.192.168.33&#34;;
</span></span><span style="display:flex;"><span>    allow-update { none; };
</span></span><span style="display:flex;"><span>};</span></span></code></pre></td></tr></table>
</div>
</div></p>
<hr style="border-color: red; border-width: 3px;"/>
<p>Este archivo especifica qu√© dominios gestiona el servidor DNS y d√≥nde se encuentran los archivos de zona asociados. Se puede definir el tipo de zona (maestra, esclava o reenviadora) y sus restricciones de actualizaci√≥n.</p>
<h3 id="archivo-de-zona-directa">Archivo de Zona Directa</h3>
<p>Un archivo de base de datos DNS es un <strong>archivo de zona</strong> que contiene los registros para los dominios que gestiona un servidor de nombres.</p>
<p>El archivo de zona directa debe ubicarse dentro del directorio /etc/bind/zones/ o el directorio definido en la directiva directory en named.conf.options.
Para que BIND9 utilice este archivo de zona, debe estar referenciado en named.conf.local dentro de la configuraci√≥n de la zona:
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code><span style="background-color:#3c3d38"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-php" data-lang="php"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#a6e22e">zone</span> <span style="color:#e6db74">&#34;midominio.com&#34;</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">type</span> <span style="color:#a6e22e">master</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">file</span> <span style="color:#e6db74">&#34;/etc/bind/zones/db.midominio.com&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">allow</span><span style="color:#f92672">-</span><span style="color:#a6e22e">update</span> { <span style="color:#a6e22e">none</span>; }; 
</span></span><span style="display:flex;"><span>};</span></span></code></pre></td></tr></table>
</div>
</div></p>
<h2 id="par√°metros-de-configuraci√≥n-y-registros-del-servidor-de-nombres"><strong>Par√°metros de configuraci√≥n y registros del servidor de nombres</strong></h2>
<h3 id="principales-tipos-de-registros-dns"><strong>Principales tipos de registros DNS</strong></h3>
<ul>
<li>
<p><strong>Registro SOA (Start of Authority)</strong><br>
Indica el servidor primario de la zona y par√°metros de sincronizaci√≥n con servidores secundarios.<br>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code><span style="background-color:#3c3d38"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-php" data-lang="php"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#f92672">@</span>   <span style="color:#a6e22e">IN</span>  <span style="color:#a6e22e">SOA</span>     <span style="color:#a6e22e">ns1</span><span style="color:#f92672">.</span><span style="color:#a6e22e">midominio</span><span style="color:#f92672">.</span><span style="color:#a6e22e">com</span><span style="color:#f92672">.</span> <span style="color:#a6e22e">admin</span><span style="color:#f92672">.</span><span style="color:#a6e22e">midominio</span><span style="color:#f92672">.</span><span style="color:#a6e22e">com</span><span style="color:#f92672">.</span> (
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2024021901</span> ; <span style="color:#a6e22e">Serial</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3600</span>       ; <span style="color:#a6e22e">Refresh</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">600</span>        ; <span style="color:#a6e22e">Retry</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">86400</span>      ; <span style="color:#a6e22e">Expire</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3600</span> )     ; <span style="color:#a6e22e">TTL</span></span></span></code></pre></td></tr></table>
</div>
</div></p>
</li>
<li>
<p><strong>Registro NS (Name Server)</strong><br>
Define los servidores DNS responsables de una zona.<br>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code><span style="background-color:#3c3d38"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-php" data-lang="php"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#a6e22e">midom</span><span style="color:#f92672">.</span><span style="color:#a6e22e">es</span><span style="color:#f92672">.</span>       <span style="color:#a6e22e">IN</span>  <span style="color:#a6e22e">NS</span>  <span style="color:#a6e22e">ns1</span><span style="color:#f92672">.</span><span style="color:#a6e22e">midom</span><span style="color:#f92672">.</span><span style="color:#a6e22e">es</span><span style="color:#f92672">.</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">subdom</span><span style="color:#f92672">.</span><span style="color:#a6e22e">midom</span><span style="color:#f92672">.</span><span style="color:#a6e22e">es</span><span style="color:#f92672">.</span> <span style="color:#a6e22e">IN</span>  <span style="color:#a6e22e">NS</span>  <span style="color:#a6e22e">ns</span><span style="color:#f92672">.</span><span style="color:#a6e22e">subdom</span><span style="color:#f92672">.</span><span style="color:#a6e22e">midom</span><span style="color:#f92672">.</span><span style="color:#a6e22e">es</span><span style="color:#f92672">.</span></span></span></code></pre></td></tr></table>
</div>
</div></p>
</li>
<li>
<p><strong>Registro A (Address Record)</strong><br>
Asocia un nombre de host con una direcci√≥n IP.<br>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code><span style="background-color:#3c3d38"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-php" data-lang="php"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#a6e22e">servidor1</span>   <span style="color:#a6e22e">IN</span>  <span style="color:#a6e22e">A</span>   <span style="color:#ae81ff">192.168</span><span style="color:#f92672">.</span><span style="color:#ae81ff">1.10</span></span></span></code></pre></td></tr></table>
</div>
</div></p>
</li>
<li>
<p><strong>Registro CNAME (Canonical Name)</strong><br>
Permite asignar alias a un dominio principal.<br>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code><span style="background-color:#3c3d38"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-php" data-lang="php"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#a6e22e">ftp</span>     <span style="color:#a6e22e">IN</span>  <span style="color:#a6e22e">CNAME</span>  <span style="color:#a6e22e">servidorarchivos</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">www</span>     <span style="color:#a6e22e">IN</span>  <span style="color:#a6e22e">CNAME</span>  <span style="color:#a6e22e">servidorarchivos</span></span></span></code></pre></td></tr></table>
</div>
</div></p>
</li>
<li>
<p><strong>Registro PTR (Pointer Record)</strong><br>
Se usa para la resoluci√≥n inversa (de IP a nombre de dominio).<br>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code><span style="background-color:#3c3d38"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-php" data-lang="php"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#ae81ff">10.1</span><span style="color:#f92672">.</span><span style="color:#ae81ff">168.192</span><span style="color:#f92672">.</span><span style="color:#a6e22e">in</span><span style="color:#f92672">-</span><span style="color:#a6e22e">addr</span><span style="color:#f92672">.</span><span style="color:#a6e22e">arpa</span><span style="color:#f92672">.</span> <span style="color:#a6e22e">IN</span>  <span style="color:#a6e22e">PTR</span>  <span style="color:#a6e22e">servidor1</span><span style="color:#f92672">.</span><span style="color:#a6e22e">midominio</span><span style="color:#f92672">.</span><span style="color:#a6e22e">com</span><span style="color:#f92672">.</span></span></span></code></pre></td></tr></table>
</div>
</div></p>
</li>
<li>
<p><strong>Registro MX (Mail Exchange)</strong><br>
Define los servidores encargados de gestionar el correo del dominio.<br>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code><span style="background-color:#3c3d38"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-php" data-lang="php"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#a6e22e">midominio</span><span style="color:#f92672">.</span><span style="color:#a6e22e">com</span><span style="color:#f92672">.</span>  <span style="color:#a6e22e">IN</span>  <span style="color:#a6e22e">MX</span>  <span style="color:#ae81ff">10</span> <span style="color:#a6e22e">mail</span><span style="color:#f92672">.</span><span style="color:#a6e22e">midominio</span><span style="color:#f92672">.</span><span style="color:#a6e22e">com</span><span style="color:#f92672">.</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">midominio</span><span style="color:#f92672">.</span><span style="color:#a6e22e">com</span><span style="color:#f92672">.</span>  <span style="color:#a6e22e">IN</span>  <span style="color:#a6e22e">MX</span>  <span style="color:#ae81ff">20</span> <span style="color:#a6e22e">backup</span><span style="color:#f92672">-</span><span style="color:#a6e22e">mail</span><span style="color:#f92672">.</span><span style="color:#a6e22e">midominio</span><span style="color:#f92672">.</span><span style="color:#a6e22e">com</span><span style="color:#f92672">.</span></span></span></code></pre></td></tr></table>
</div>
</div></p>
</li>
<li>
<p><strong>Registro SPF (Sender Policy Framework)</strong><br>
Ayuda a prevenir el spoofing de correos electr√≥nicos indicando qu√© servidores est√°n autorizados para enviar emails en nombre del dominio.<br>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code><span style="background-color:#3c3d38"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-php" data-lang="php"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#a6e22e">midominio</span><span style="color:#f92672">.</span><span style="color:#a6e22e">com</span><span style="color:#f92672">.</span>  <span style="color:#a6e22e">IN</span>  <span style="color:#a6e22e">TXT</span>  <span style="color:#e6db74">&#34;v=spf1 mx ~all&#34;</span></span></span></code></pre></td></tr></table>
</div>
</div></p>
</li>
</ul>
<p><strong>Cada tipo de registro tiene una funci√≥n espec√≠fica y es fundamental en la configuraci√≥n y resoluci√≥n de dominios en una red.</strong></p>
<hr style="border-color: red; border-width: 3px;"/>
<h1 id="verificaci√≥n-y-pruebas">Verificaci√≥n y Pruebas</h1>


<div class="alert alert-success" role="alert">
<h4 class="alert-heading">Comandos de Verificaci√≥n</h4>

    <ul>
<li>Verificar sintaxis: <code>named-checkconf</code></li>
<li>Verificar zona: <code>named-checkzone ejemplo.local /etc/bind/zones/db.ejemplo.local</code></li>
<li>Consultar registros: <code>dig @192.168.33.10 www.ejemplo.local</code></li>
</ul>


</div>

<details>
    <summary>Ejemplo de consulta DNS exitosa</summary>
    <div class="solution-content">
        
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>; &lt;&lt;&gt;&gt; DiG 9.16.1-Ubuntu &lt;&lt;&gt;&gt; @192.168.33.10 www.ejemplo.local
</span></span><span style="display:flex;"><span>; (1 server found)
</span></span><span style="display:flex;"><span>;; global options: +cmd
</span></span><span style="display:flex;"><span>;; Got answer:
</span></span><span style="display:flex;"><span>;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 12345
</span></span><span style="display:flex;"><span>;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 1, ADDITIONAL: 1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>;; ANSWER SECTION:
</span></span><span style="display:flex;"><span>www.ejemplo.local.    604800  IN      A       192.168.33.20</span></span></code></pre></div>


</details>

<style>
    .solution-content {
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-top: 5px;
        background-color: #f9f9f9;
    }
    summary {
        cursor: pointer;
        font-weight: bold;
        color: #0073e6;
    }
</style>

<h1 id="consideraciones-de-seguridad">Consideraciones de Seguridad</h1>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Medidas de Seguridad Importantes</h4>

    <ol>
<li>Limitar la recursi√≥n solo a redes confiables</li>
<li>Implementar DNSSEC para proteger la integridad de las respuestas</li>
<li>Mantener BIND actualizado con los √∫ltimos parches de seguridad</li>
<li>Configurar correctamente los permisos de archivos</li>
</ol>


</div>





<div style="border: 1px solid navy; border-radius: 5px; overflow: hidden;">
    <div style="background-color: navy; color: white;
    font-weight: bold; padding: 10px; display: flex; align-items: center;">
        
        <span style="margin-right: 8px;">
            
                <i class="fas fa-book"></i> 
            
        </span>
        
        <span>Referencias DNS</span>
    </div>

    <h3 style="padding: 5px; font-weight: bold; color: navy;">Documentaci√≥n Oficial y Recursos</h3>

    <hr style="border-color: lightblue; border-width: 3px"/>
    
    <div style="background-color: #e0f7fa; color: navy; padding: 10px;">
        <ul>
            
            <li><ul>
<li><a href="https://www.isc.org/bind/">Documentaci√≥n oficial de BIND9</a></li>
</ul>
</li>
            
            <li><ul>
<li><a href="https://tools.ietf.org/html/rfc1034">RFC 1034 - Domain Names - Concepts and Facilities</a></li>
</ul>
</li>
            
            <li><ul>
<li><a href="https://tools.ietf.org/html/rfc1035">RFC 1035 - Domain Names - Implementation and Specification</a></li>
</ul>
</li>
            
            
            
        </ul>
    </div>
</div>


</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-58b7419fde94cadcdd42f0085c515df7">2 - Configuraci√≥n Avanzada de BIND</h1>
    <div class="lead">Configuraciones avanzadas de BIND9 incluyendo vistas, ACLs y DNSSEC.</div>
	<h1 id="configuraci√≥n-avanzada-de-bind9">Configuraci√≥n Avanzada de BIND9</h1>
<h2 id="vistas-dns-split-dns">Vistas DNS (Split DNS)</h2>
<div class="definicion-concepto">
  <div class="definicion-titulo">
    
    <i class="fas fa-code-branch" aria-hidden="true"></i>
    
    <strong>Split DNS</strong>
  </div>
  <div class="definicion-contenido ">
      <ul>
        
        <li>Split DNS permite servir diferentes respuestas DNS seg√∫n el origen de la consulta, √∫til para separar resoluci√≥n interna y externa.</li>
        
        
        
      </ul>
  </div>
</div>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>view &#34;internal&#34; {
</span></span><span style="display:flex;"><span>    match-clients { 192.168.33.0/24; localhost; };
</span></span><span style="display:flex;"><span>    zone &#34;ejemplo.local&#34; {
</span></span><span style="display:flex;"><span>        type master;
</span></span><span style="display:flex;"><span>        file &#34;/etc/bind/zones/internal/db.ejemplo.local&#34;;
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>view &#34;external&#34; {
</span></span><span style="display:flex;"><span>    match-clients { any; };
</span></span><span style="display:flex;"><span>    zone &#34;ejemplo.local&#34; {
</span></span><span style="display:flex;"><span>        type master;
</span></span><span style="display:flex;"><span>        file &#34;/etc/bind/zones/external/db.ejemplo.local&#34;;
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>};</span></span></code></pre></td></tr></table>
</div>
</div>
<h2 id="configuraci√≥n-de-acls">Configuraci√≥n de ACLs</h2>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>acl &#34;trusted&#34; {
</span></span><span style="display:flex;"><span>    192.168.33.0/24;    # Red local
</span></span><span style="display:flex;"><span>    localhost;          # Servidor local
</span></span><span style="display:flex;"><span>    localnets;         # Redes locales
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>options {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    allow-query { trusted; };
</span></span><span style="display:flex;"><span>    allow-recursion { trusted; };
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>};</span></span></code></pre></td></tr></table>
</div>
</div>
<h2 id="implementaci√≥n-de-dnssec">Implementaci√≥n de DNSSEC</h2>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Importante</h4>

    DNSSEC a√±ade firmas digitales a los registros DNS para garantizar su autenticidad.

</div>

<h3 id="generaci√≥n-de-claves">Generaci√≥n de Claves</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Generar clave ZSK (Zone Signing Key)</span>
</span></span><span style="display:flex;"><span>dnssec-keygen -a NSEC3RSASHA1 -b <span style="color:#ae81ff">2048</span> -n ZONE ejemplo.local
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Generar clave KSK (Key Signing Key)</span>
</span></span><span style="display:flex;"><span>dnssec-keygen -f KSK -a NSEC3RSASHA1 -b <span style="color:#ae81ff">4096</span> -n ZONE ejemplo.local</span></span></code></pre></td></tr></table>
</div>
</div>
<h3 id="firma-de-zona">Firma de Zona</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Firmar la zona</span>
</span></span><span style="display:flex;"><span>dnssec-signzone -A -3 <span style="color:#66d9ef">$(</span>head -c <span style="color:#ae81ff">1000</span> /dev/random | sha1sum | cut -b 1-16<span style="color:#66d9ef">)</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    -N INCREMENT -o ejemplo.local -t db.ejemplo.local</span></span></code></pre></td></tr></table>
</div>
</div>
<h2 id="replicaci√≥n-de-zonas">Replicaci√≥n de Zonas</h2>
<h3 id="configuraci√≥n-del-servidor-maestro">Configuraci√≥n del Servidor Maestro</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>zone &#34;ejemplo.local&#34; {
</span></span><span style="display:flex;"><span>    type master;
</span></span><span style="display:flex;"><span>    file &#34;/etc/bind/zones/db.ejemplo.local&#34;;
</span></span><span style="display:flex;"><span>    allow-transfer { 192.168.33.11; };
</span></span><span style="display:flex;"><span>    notify yes;
</span></span><span style="display:flex;"><span>};</span></span></code></pre></td></tr></table>
</div>
</div>
<h3 id="configuraci√≥n-del-servidor-esclavo">Configuraci√≥n del Servidor Esclavo</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>zone &#34;ejemplo.local&#34; {
</span></span><span style="display:flex;"><span>    type slave;
</span></span><span style="display:flex;"><span>    file &#34;/var/cache/bind/db.ejemplo.local&#34;;
</span></span><span style="display:flex;"><span>    masters { 192.168.33.10; };
</span></span><span style="display:flex;"><span>};</span></span></code></pre></td></tr></table>
</div>
</div>
<hr style="border-color: red; border-width: 3px;"/>
<h2 id="copyinsert">



<div style="border: 1px solid navy; border-radius: 5px; overflow: hidden;">
    <div style="background-color: navy; color: white;
    font-weight: bold; padding: 10px; display: flex; align-items: center;">
        
        <span style="margin-right: 8px;">
            
                <i class="fas fa-book"></i> 
            
        </span>
        
        <span>Referencias</span>
    </div>

    <h3 style="padding: 5px; font-weight: bold; color: navy;">Fuentes de Informaci√≥n</h3>

    <hr style="border-color: lightblue; border-width: 3px"/>
    
    <div style="background-color: #e0f7fa; color: navy; padding: 10px;">
        <ul>
            
            <li><ul>
<li><a href="https://bind9.readthedocs.io/">BIND 9 Administrator Reference Manual</a></li>
</ul>
</li>
            
            <li><ul>
<li><a href="https://dnssec-guide.readthedocs.io/">DNSSEC Guide</a></li>
</ul>
</li>
            
            
            
        </ul>
    </div>
</div>

troubleshooting.md:
markdown
CopyInsert</h2>
<h2 id="gu√≠a-de-resoluci√≥n-de-problemas-comunes-en-servidores-dns-con-bind9">title: &ldquo;Resoluci√≥n de Problemas DNS&rdquo;
linkTitle: &ldquo;Troubleshooting&rdquo;
weight: 32
description: &gt;
Gu√≠a de resoluci√≥n de problemas comunes en servidores DNS con BIND9.</h2>
<h1 id="resoluci√≥n-de-problemas-dns">Resoluci√≥n de Problemas DNS</h1>
<h2 id="herramientas-de-diagn√≥stico">Herramientas de Diagn√≥stico</h2>
<div class="definicion-concepto">
  <div class="definicion-titulo">
    
    <i class="fas fa-tools" aria-hidden="true"></i>
    
    <strong>Herramientas DNS</strong>
  </div>
  <div class="definicion-contenido ">
      <ul>
        
        <li>Conjunto de utilidades para diagnosticar y resolver problemas en servidores DNS.</li>
        
        
        
      </ul>
  </div>
</div>
<h3 id="dig-domain-information-groper">dig (Domain Information Groper)</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Consulta b√°sica</span>
</span></span><span style="display:flex;"><span>dig @localhost ejemplo.local
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Consulta reversa</span>
</span></span><span style="display:flex;"><span>dig -x 192.168.33.10
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Consulta de registro espec√≠fico</span>
</span></span><span style="display:flex;"><span>dig @localhost ejemplo.local MX</span></span></code></pre></td></tr></table>
</div>
</div>
<h3 id="nslookup">nslookup</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>nslookup www.ejemplo.local localhost
</span></span><span style="display:flex;"><span>nslookup -type<span style="color:#f92672">=</span>mx ejemplo.local</span></span></code></pre></td></tr></table>
</div>
</div>
<h2 id="problemas-comunes-y-soluciones">Problemas Comunes y Soluciones</h2>
<h3 id="1-servidor-dns-no-responde">1. Servidor DNS No Responde</h3>


<div class="alert alert-info" role="alert">
<h4 class="alert-heading">Verificaci√≥n</h4>

    <ol>
<li>Comprobar estado del servicio:
<code>systemctl status named</code></li>
<li>Verificar logs:
<code>journalctl -u named</code></li>
<li>Comprobar puerto 53:
<code>netstat -tulpn | grep named</code></li>
</ol>


</div>

<h3 id="2-errores-en-archivos-de-zona">2. Errores en Archivos de Zona</h3>
<details>
    <summary>Comandos de Verificaci√≥n</summary>
    <div class="solution-content">
        
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Verificar sintaxis de configuraci√≥n</span>
</span></span><span style="display:flex;"><span>named-checkconf
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Verificar archivo de zona</span>
</span></span><span style="display:flex;"><span>named-checkzone ejemplo.local /etc/bind/zones/db.ejemplo.local</span></span></code></pre></div>


</details>

<style>
    .solution-content {
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-top: 5px;
        background-color: #f9f9f9;
    }
    summary {
        cursor: pointer;
        font-weight: bold;
        color: #0073e6;
    }
</style>

<h3 id="3-problemas-de-resoluci√≥n">3. Problemas de Resoluci√≥n</h3>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Pasos de Verificaci√≥n</h4>

    <ol>
<li>Verificar archivo /etc/resolv.conf</li>
<li>Comprobar conectividad al servidor DNS</li>
<li>Revisar reglas de firewall</li>
<li>Verificar permisos de archivos</li>
</ol>


</div>

<h2 id="logs-y-depuraci√≥n">Logs y Depuraci√≥n</h2>
<h3 id="configuraci√≥n-de-logging">Configuraci√≥n de Logging</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>logging {
</span></span><span style="display:flex;"><span>    channel default_debug {
</span></span><span style="display:flex;"><span>        file &#34;data/named.run&#34;;
</span></span><span style="display:flex;"><span>        severity dynamic;
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>};</span></span></code></pre></td></tr></table>
</div>
</div>
<h3 id="aumentar-nivel-de-debug">Aumentar Nivel de Debug</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>rndc trace 3
</span></span><span style="display:flex;"><span>rndc notrace  # Para desactivar</span></span></code></pre></td></tr></table>
</div>
</div>
<hr style="border-color: red; border-width: 3px;"/>




<div style="border: 1px solid navy; border-radius: 5px; overflow: hidden;">
    <div style="background-color: navy; color: white;
    font-weight: bold; padding: 10px; display: flex; align-items: center;">
        
        <span style="margin-right: 8px;">
            
                <i class="fas fa-book"></i> 
            
        </span>
        
        <span>Referencias</span>
    </div>

    <h3 style="padding: 5px; font-weight: bold; color: navy;">Fuentes de Informaci√≥n</h3>

    <hr style="border-color: lightblue; border-width: 3px"/>
    
    <div style="background-color: #e0f7fa; color: navy; padding: 10px;">
        <ul>
            
            <li><ul>
<li><a href="https://kb.isc.org/docs/aa-01123">BIND 9 Troubleshooting Guide</a></li>
</ul>
</li>
            
            <li><ul>
<li><a href="https://www.zytrax.com/books/dns/ch7/">DNS and BIND Troubleshooting</a></li>
</ul>
</li>
            
            
            
        </ul>
    </div>
</div>


</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e70f69453789dd4e29465068f3ecc3bd">3 - Comandos para dns</h1>
    
	




<div style="border: 1px solid darkgreen; border-radius: 5px; overflow: hidden;">
    <div style="background-color:darkgreen; color:white;
    font-weight:bold; padding:10px; display: flex; align-items: center;">
        
        <span style="margin-right: 8px;">
            
                <i class="fas fa-check-circle"></i> 
            
        </span>
        
        <span>Objetivos</span>
    </div>

    <h3 style="padding: 5px; font-weight:bold">Qu√© veremos aqu√≠</h3>

    <hr style="border-color:seagreen; border-width:3px"/>
    
    <div style="background-color:#d0f0d0; color:darkgreen; padding: 10px;">
        <ul>
            
            <li>- Conocer comandos para DNS.</li>
            
            <li>- Conceptos de pruebas y diagn√≥sticos.</li>
            
            <li>  </li>
            
            
        </ul>
    </div>
    


</div>

<h2 id="herramientas-de-diagn√≥stico-dns">Herramientas de Diagn√≥stico DNS</h2>
<h3 id="herramientas-de-consulta-dns"><strong>Herramientas de consulta DNS</strong></h3>
<ul>
<li><strong><code>dig</code></strong> - Consultas DNS detalladas:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dig @192.168.33.10 web.inf.com
</span></span><span style="display:flex;"><span>dig +short web.inf.com
</span></span><span style="display:flex;"><span>dig -x 192.168.33.20  <span style="color:#75715e"># Consulta inversa</span>
</span></span></code></pre></div></li>
<li><strong><code>nslookup</code></strong> - Consultas b√°sicas:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>nslookup web.inf.com 192.168.33.10
</span></span><span style="display:flex;"><span>nslookup -type<span style="color:#f92672">=</span>MX inf.com
</span></span></code></pre></div></li>
<li><strong><code>host</code></strong> - Alternativa a <code>nslookup</code>:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>host web.inf.com 192.168.33.10
</span></span><span style="display:flex;"><span>host -t MX inf.com
</span></span></code></pre></div></li>
</ul>
<h3 id="depuraci√≥n-del-servidor-dns"><strong>Depuraci√≥n del Servidor DNS</strong></h3>
<ul>
<li><strong>Verificaci√≥n de configuraci√≥n:</strong>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>named-checkconf
</span></span><span style="display:flex;"><span>named-checkzone inf.com /etc/bind/zones/db.inf.com
</span></span></code></pre></div></li>
<li><strong>Estado del servicio:</strong>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>systemctl status bind9
</span></span><span style="display:flex;"><span>journalctl -u bind9 --no-pager | tail -n <span style="color:#ae81ff">20</span>
</span></span></code></pre></div></li>
</ul>
<h3 id="an√°lisis-de-tr√°fico-dns"><strong>An√°lisis de tr√°fico DNS</strong></h3>
<ul>
<li><strong><code>tcpdump</code></strong> - Captura de paquetes DNS:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo tcpdump -i eth0 port <span style="color:#ae81ff">53</span>
</span></span></code></pre></div></li>
<li><strong><code>wireshark</code></strong> - An√°lisis visual del tr√°fico DNS.</li>
<li><strong><code>dnstracer</code></strong> - Rastreo de resoluci√≥n DNS:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dnstracer web.inf.com
</span></span></code></pre></div></li>
<li><strong><code>dnsperf</code></strong> - Pruebas de rendimiento del DNS:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dnsperf -s 192.168.33.10 -d dns_queries.txt
</span></span></code></pre></div></li>
</ul>




<div style="border: 1px solid navy; border-radius: 5px; overflow: hidden;">
    <div style="background-color: navy; color: white;
    font-weight: bold; padding: 10px; display: flex; align-items: center;">
        
        <span style="margin-right: 8px;">
            
                <i class="fas fa-book"></i> 
            
        </span>
        
        <span>Referencias DNS</span>
    </div>

    <h3 style="padding: 5px; font-weight: bold; color: navy;">Documentaci√≥n Oficial y Recursos</h3>

    <hr style="border-color: lightblue; border-width: 3px"/>
    
    <div style="background-color: #e0f7fa; color: navy; padding: 10px;">
        <ul>
            
            <li><ul>
<li><a href="https://www.isc.org/bind/">Documentaci√≥n oficial de BIND9</a></li>
</ul>
</li>
            
            <li><ul>
<li><a href="https://tools.ietf.org/html/rfc1034">RFC 1034 - Domain Names - Concepts and Facilities</a></li>
</ul>
</li>
            
            <li><ul>
<li><a href="https://tools.ietf.org/html/rfc1035">RFC 1035 - Domain Names - Implementation and Specification</a></li>
</ul>
</li>
            
            <li></li>
            
            
        </ul>
    </div>
</div>


</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-2f924b91564d17d9e0d461d693c6b856">4 - Pr√°ctica</h1>
    <div class="lead">Instalaci√≥n y configuraci√≥n de un servidor DNS utilizando BIND9 para la resoluci√≥n de nombres en una red local con contenedores Docker.</div>
	




<div style="border: 1px solid darkgreen; border-radius: 5px; overflow: hidden;">
    <div style="background-color:darkgreen; color:white;
    font-weight:bold; padding:10px; display: flex; align-items: center;">
        
        <span style="margin-right: 8px;">
            
                <i class="fas fa-check-circle"></i> 
            
        </span>
        
        <span>Objetivos</span>
    </div>

    <h3 style="padding: 5px; font-weight:bold">Qu√© veremos aqu√≠</h3>

    <hr style="border-color:seagreen; border-width:3px"/>
    
    <div style="background-color:#d0f0d0; color:darkgreen; padding: 10px;">
        <ul>
            
            <li>- Comprender el concepto de DNS.</li>
            
            <li>- Instalar el servicio BIND9.</li>
            
            <li>- Configurar un servidor DNS para resolver nombres de dominio personalizados.</li>
            
            <li>- Implementar contenedores Docker con IPs fijas y gestionar su resoluci√≥n DNS.</li>
            
            <li>  </li>
            
            
        </ul>
    </div>
    


</div>

<h1 id="enunciado-de-la-pr√°ctica">Enunciado de la Pr√°ctica</h1>
<p>En esta pr√°ctica, vamos a configurar un servidor DNS que permita la resoluci√≥n de tres dominios personalizados en una red local:</p>
<ul>
<li><strong>web.inf.com</strong> ‚Üí Contenedor Docker con IP fija.</li>
<li><strong>ftp.inf.com</strong> ‚Üí Contenedor Docker con IP fija.</li>
<li><strong>db.inf.com</strong> ‚Üí Contenedor Docker con IP fija.</li>
</ul>
<p>Cada uno de estos dominios estar√° asociado a un contenedor Docker que ejecuta un servicio web, FTP o base de datos. Nuestro objetivo es configurar un servidor DNS con BIND9 en un entorno de pruebas basado en Vagrant, asegurando que los nombres de dominio se resuelvan correctamente a las IPs fijas de los contenedores.</p>
<h1 id="instalaci√≥n-y-configuraci√≥n">Instalaci√≥n y Configuraci√≥n</h1>
<h2 id="entorno-de-pr√°ctica">Entorno de Pr√°ctica</h2>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code><span style="background-color:#3c3d38"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-ruby" data-lang="ruby"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#66d9ef">Vagrant</span><span style="color:#f92672">.</span>configure(<span style="color:#e6db74">&#34;2&#34;</span>) <span style="color:#66d9ef">do</span> <span style="color:#f92672">|</span>config<span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span>config<span style="color:#f92672">.</span>vm<span style="color:#f92672">.</span>box <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ubuntu/focal64&#34;</span>
</span></span><span style="display:flex;"><span>config<span style="color:#f92672">.</span>vm<span style="color:#f92672">.</span>hostname <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;dns-server&#34;</span>
</span></span><span style="display:flex;"><span>config<span style="color:#f92672">.</span>vm<span style="color:#f92672">.</span>network <span style="color:#e6db74">&#34;private_network&#34;</span>, <span style="color:#e6db74">ip</span>: <span style="color:#e6db74">&#34;192.168.33.10&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span></span></span></code></pre></td></tr></table>
</div>
</div>
<h2 id="instalaci√≥n-de-bind9">Instalaci√≥n de BIND9</h2>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt update
</span></span><span style="display:flex;"><span>sudo apt install bind9 bind9utils bind9-doc</span></span></code></pre></td></tr></table>
</div>
</div>
<h2 id="configuraci√≥n-b√°sica">Configuraci√≥n B√°sica</h2>
<p>Los archivos principales de configuraci√≥n se encuentran en 

<strong>
<span class="font-weight-bold text-primary fs-1.5">

    /etc/bind/


</span>
</strong>
:</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>/etc/bind/
</span></span><span style="display:flex;"><span>‚îú‚îÄ‚îÄ named.conf          # Configuraci√≥n principal
</span></span><span style="display:flex;"><span>‚îú‚îÄ‚îÄ named.conf.local    # Zonas locales
</span></span><span style="display:flex;"><span>‚îú‚îÄ‚îÄ named.conf.options  # Opciones globales
</span></span><span style="display:flex;"><span>‚îî‚îÄ‚îÄ zones/             # Directorio para archivos de zona</span></span></code></pre></td></tr></table>
</div>
</div>
<h3 id="configuraci√≥n-de-opciones-globales">Configuraci√≥n de Opciones Globales</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>options {
</span></span><span style="display:flex;"><span>    directory &#34;/var/cache/bind&#34;;
</span></span><span style="display:flex;"><span>    recursion yes;
</span></span><span style="display:flex;"><span>    allow-recursion { localhost; 192.168.33.0/24; };
</span></span><span style="display:flex;"><span>    listen-on { 192.168.33.10; };
</span></span><span style="display:flex;"><span>    allow-transfer { none; };
</span></span><span style="display:flex;"><span>    dnssec-validation auto;
</span></span><span style="display:flex;"><span>};</span></span></code></pre></td></tr></table>
</div>
</div>
<h2 id="configuraci√≥n-de-zona-local">Configuraci√≥n de Zona Local</h2>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>zone &#34;inf.com&#34; {
</span></span><span style="display:flex;"><span>type master;
</span></span><span style="display:flex;"><span>file &#34;/etc/bind/zones/db.inf.com&#34;;
</span></span><span style="display:flex;"><span>allow-update { none; };
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>zone &#34;33.168.192.in-addr.arpa&#34; {
</span></span><span style="display:flex;"><span>type master;
</span></span><span style="display:flex;"><span>file &#34;/etc/bind/zones/db.192.168.33&#34;;
</span></span><span style="display:flex;"><span>allow-update { none; };
</span></span><span style="display:flex;"><span>};</span></span></code></pre></td></tr></table>
</div>
</div>
<h3 id="archivo-de-zona-directa">Archivo de Zona Directa</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>$TTL    604800
</span></span><span style="display:flex;"><span>@       IN      SOA     ns1.inf.com. admin.inf.com. (
</span></span><span style="display:flex;"><span>2024021901         ; Serial
</span></span><span style="display:flex;"><span>604800         ; Refresh
</span></span><span style="display:flex;"><span>86400         ; Retry
</span></span><span style="display:flex;"><span>2419200         ; Expire
</span></span><span style="display:flex;"><span>604800 )       ; Negative Cache TTL
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>@       IN      NS      ns1.inf.com.
</span></span><span style="display:flex;"><span>@       IN      A       192.168.33.10
</span></span><span style="display:flex;"><span>ns1     IN      A       192.168.33.10
</span></span><span style="display:flex;"><span>web     IN      A       192.168.33.20
</span></span><span style="display:flex;"><span>ftp     IN      A       192.168.33.30
</span></span><span style="display:flex;"><span>db      IN      A       192.168.33.40</span></span></code></pre></td></tr></table>
</div>
</div>
<hr style="border-color: red; border-width: 3px;"/>
<h1 id="verificaci√≥n-y-pruebas">Verificaci√≥n y Pruebas</h1>


<div class="alert alert-success" role="alert">
<h4 class="alert-heading">Comandos de Verificaci√≥n</h4>

    <ul>
<li>Verificar sintaxis: <code>named-checkconf</code></li>
<li>Verificar zona: <code>named-checkzone inf.com /etc/bind/zones/db.inf.com</code></li>
<li>Consultar registros: <code>dig @192.168.33.10 web.inf.com</code></li>
</ul>


</div>

<details>
    <summary>Ejemplo de consulta DNS exitosa</summary>
    <div class="solution-content">
        
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>; &lt;&lt;&gt;&gt; DiG 9.16.1-Ubuntu &lt;&lt;&gt;&gt; @192.168.33.10 web.inf.com
</span></span><span style="display:flex;"><span>; (1 server found)
</span></span><span style="display:flex;"><span>;; global options: +cmd
</span></span><span style="display:flex;"><span>;; Got answer:
</span></span><span style="display:flex;"><span>;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 12345
</span></span><span style="display:flex;"><span>;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 1, ADDITIONAL: 1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>;; ANSWER SECTION:
</span></span><span style="display:flex;"><span>web.inf.com.    604800  IN      A       192.168.33.20</span></span></code></pre></div>


</details>

<style>
    .solution-content {
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-top: 5px;
        background-color: #f9f9f9;
    }
    summary {
        cursor: pointer;
        font-weight: bold;
        color: #0073e6;
    }
</style>

<h1 id="consideraciones-de-seguridad">Consideraciones de Seguridad</h1>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Medidas de Seguridad Importantes</h4>

    <ol>
<li>Limitar la recursi√≥n solo a redes confiables.</li>
<li>Implementar DNSSEC para proteger la integridad de las respuestas.</li>
<li>Mantener BIND actualizado con los √∫ltimos parches de seguridad.</li>
<li>Configurar correctamente los permisos de archivos.</li>
</ol>


</div>





<div style="border: 1px solid navy; border-radius: 5px; overflow: hidden;">
    <div style="background-color: navy; color: white;
    font-weight: bold; padding: 10px; display: flex; align-items: center;">
        
        <span style="margin-right: 8px;">
            
                <i class="fas fa-book"></i> 
            
        </span>
        
        <span>Referencias DNS</span>
    </div>

    <h3 style="padding: 5px; font-weight: bold; color: navy;">Documentaci√≥n Oficial y Recursos</h3>

    <hr style="border-color: lightblue; border-width: 3px"/>
    
    <div style="background-color: #e0f7fa; color: navy; padding: 10px;">
        <ul>
            
            <li><ul>
<li><a href="https://www.isc.org/bind/">Documentaci√≥n oficial de BIND9</a></li>
</ul>
</li>
            
            <li><ul>
<li><a href="https://tools.ietf.org/html/rfc1034">RFC 1034 - Domain Names - Concepts and Facilities</a></li>
</ul>
</li>
            
            <li><ul>
<li><a href="https://tools.ietf.org/html/rfc1035">RFC 1035 - Domain Names - Implementation and Specification</a></li>
</ul>
</li>
            
            <li></li>
            
            
        </ul>
    </div>
</div>


</div>



    
      
  
  
  
  

  
  

  

    
	
  



          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="manuelromeromiguel@gmail.com" aria-label="manuelromeromiguel@gmail.com">
    <a target="_blank" rel="noopener" href="mailto:manuelromeromiguel@gmail.com" aria-label="manuelromeromiguel@gmail.com">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/MAlejandroR" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        
      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2025
    <span class="td-footer__authors">@MRomero</span></span><span class="td-footer__all_rights_reserved">Derechos reservados</span><span class="ms-2"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">Pol√≠tica de privacidad</a></span>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/servicios/js/main.js"></script>
<script defer src="/servicios/js/click-to-copy.js" crossorigin="anonymous"></script>
<script src='/servicios/js/tabpane-persist.js'></script>

  </body>
</html>
