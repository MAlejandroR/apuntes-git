<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="es" class="no-js">
  <head><script src="/manuel/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=manuel/livereload" data-no-instant defer></script>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="alternate" type="application/rss&#43;xml" href="http://localhost:1313/manuel/docs/laravel/test/index.xml">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/manuel/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/manuel/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/manuel/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/manuel/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/manuel/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/manuel/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/manuel/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/manuel/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/manuel/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/manuel/favicons/android-192x192.png" sizes="192x192">

<title>Test unitarios | M√°ster en  Web</title>
<meta name="description" content="Powerful, extensible, and feature-packed frontend toolkit. Build and customize with Sass, utilize prebuilt grid system and components, and bring projects to life with powerful JavaScript plugins.">
<meta property="og:url" content="http://localhost:1313/manuel/docs/laravel/test/">
  <meta property="og:site_name" content="M√°ster en  Web">
  <meta property="og:title" content="Test unitarios">
  <meta property="og:description" content="Tipos de test en laravel Realizar test, es muy importante. Muchas veces pensamos que como no los necesitamos para que la apliaci√≥n funcione lo dejamos para el final, o simplemente no lo hacemos (para ejemplo yo mismo ü•∂ )
Laravel ya aporta una estructura de test, que podemos ver en la carpeta correspondiente. En ella vemos que tenemos dos tipos de test:
Feature Test de caracter√≠sticas d√≥nde se testean diferentes componentes interactuando entre ellos">
  <meta property="og:locale" content="es">
  <meta property="og:type" content="website">

  <meta itemprop="name" content="Test unitarios">
  <meta itemprop="description" content="Tipos de test en laravel Realizar test, es muy importante. Muchas veces pensamos que como no los necesitamos para que la apliaci√≥n funcione lo dejamos para el final, o simplemente no lo hacemos (para ejemplo yo mismo ü•∂ )
Laravel ya aporta una estructura de test, que podemos ver en la carpeta correspondiente. En ella vemos que tenemos dos tipos de test:
Feature Test de caracter√≠sticas d√≥nde se testean diferentes componentes interactuando entre ellos">
  <meta itemprop="datePublished" content="2023-04-08T18:21:47+02:00">
  <meta itemprop="dateModified" content="2023-04-08T18:21:47+02:00">
  <meta itemprop="wordCount" content="946">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Test unitarios">
  <meta name="twitter:description" content="Tipos de test en laravel Realizar test, es muy importante. Muchas veces pensamos que como no los necesitamos para que la apliaci√≥n funcione lo dejamos para el final, o simplemente no lo hacemos (para ejemplo yo mismo ü•∂ )
Laravel ya aporta una estructura de test, que podemos ver en la carpeta correspondiente. En ella vemos que tenemos dos tipos de test:
Feature Test de caracter√≠sticas d√≥nde se testean diferentes componentes interactuando entre ellos">





<link href="/manuel/scss/main.css" rel="stylesheet">

<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>

  </head>
  <body class="td-section">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/manuel/"><span class="navbar-brand__logo navbar-logo"><svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="300pt" height="100pt" viewBox="0 0 300 100"><g transform="translate(0.000000,100.000000) scale(0.100000,-0.100000)" fill="#000" stroke="none"><path d="M2867 984c-15-16-7-53 14-59 30-10 58 19 43 43-12 18-45 28-57 16z"/><path d="M2542 960c-27-11-39-37-24-52 8-8 15-8 26 1 17 15 58 11 63-5 2-7-19-39-47-72-70-85-68-92 30-92 73 0 80 2 80 20 0 17-7 20-45 20h-45l40 51c25 32 40 61 40 79 0 49-58 74-118 50z"/><path d="M2680 945c0-18 5-25 20-25 19 0 20-7 20-90 0-89 0-90 25-90h25v115 115h-45c-41 0-45-2-45-25z"/><path d="M2960 910c0-5 5-10 10-10 6 0 10 5 10 10 0 6-4 10-10 10-5 0-10-4-10-10z"/><path d="M2910 881c0-18 30-25 43-11 9 10 9 11-1 6-7-4-19-2-27 4-11 9-15 9-15 1z"/><path d="M2850 805c-24-25-42-45-39-45s25 20 49 45 42 45 39 45-25-20-49-45z"/><path d="M7 824c-4-4-7-128-7-274 0-217 3-270 14-279 9-8 45-11 98-9l83 3 5 184 5 184 109-164c60-90 118-174 129-186l20-23h349 348v75 75H960 760v35 35l188 2 187 3v65 65l-187 3-188 2v25 25h320 320V465 259l98 3 97 3 3 203 2 202h210 210l2-202 3-203h1e2 1e2l3 202 2 202 118 3 117 3 3 78 3 77h-960-961l-2-182-3-183-120 180-121 180-145 3c-80 1-148-1-152-4z"/><path d="M753 169c-26-8-33-16-39-45-3-19-2-50 3-67 7-26 16-34 46-41 59-15 91 1 95 47 3 36 3 37-32 37-37 0-48-13-20-24 22-8 7-26-22-26-21 0-24 4-24 40 0 47 13 56 64 42 32-9 36-8 36 8 0 10-3 21-7 23-20 12-71 15-1e2 6z"/><path d="M1416 167c-28-20-18-71 14-75 60-7 71-12 68-35-2-18-11-23-41-25-26-2-39 1-43 12-3 9-10 16-15 16-11 0 1-33 15-42 19-13 74-8 90 8 32 32 13 74-34 74-36 0-63 21-54 43 8 23 63 23 80 0 13-17 13-17 14 0 0 10-11 22-26 27-34 13-47 13-68-3z"/><path d="M1890 173c-24-9-30-25-30-80 0-61 17-83 63-83 49 0 60 13 65 73 4 46 1 58-17 76-20 20-50 25-81 14zm78-57c2-22 1-50-3-63-5-21-11-24-43-21-37 3-37 3-40 52-4 69 1 78 45 74 36-3 38-5 41-42z"/><path d="M2035 166c-23-17-28-114-6-139 16-20 81-23 99-5 7 7 12 39 12 75 0 51-3 64-19 73-27 14-64 13-86-4zm80-71V35l-34-3c-40-4-51 9-51 60 0 59 8 69 49 66l36-3V95z"/><path d="M312 85c-26-53-37-85-29-85 7 0 32 38 55 85 26 53 37 85 29 85-7 0-32-38-55-85z"/><path d="M480 90V10h53c69 0 88 15 94 72 8 73-6 88-82 88h-65V90zm95 5c0-36-3-40-27-43-26-3-28-1-28 36 0 45 6 54 35 50 16-2 20-10 20-43z"/><path d="M650 90c0-73 2-80 20-80s20 7 20 80-2 80-20 80-20-7-20-80z"/><path d="M882 93c3-70 5-78 23-78s20 8 23 78c3 77 3 77-23 77s-26 0-23-77z"/><path d="M940 155c0-8 9-15 20-15 16 0 19-8 22-62 3-55 5-63 23-63s20 8 23 63c3 54 6 62 22 62 11 0 20 7 20 15 0 12-14 15-65 15s-65-3-65-15z"/><path d="M1115 158c-3-7-13-41-24-76-17-56-18-64-4-69 9-4 21 1 28 10 15 21 64 22 71 2 7-17 44-21 44-4 0 6-9 42-21 80-21 68-22 69-55 69-19 0-37-6-39-12zm54-75c1-7-6-13-14-13-16 0-19 17-8 46 6 16 7 16 14-2 4-10 8-25 8-31z"/><path d="M1250 90V10h55c48 0 55 2 55 20 0 16-7 20-35 20h-35v60c0 53-2 60-20 60s-20-7-20-80z"/><path d="M1549 143c-12-31-4-99 13-120 13-16 80-17 96-1 7 7 12 21 11 32 0 20-1 20-11-2-16-32-83-32-92 1-10 36-7 82 6 95 20 20 64 14 82-10l16-23-2 25c-3 23-8 25-56 28-49 3-53 1-63-25z"/><path d="M17e2 89c0-51 4-78 10-74 6 3 10 22 10 41 0 34 0 34 45 34s45 0 45-34c0-19 5-38 10-41 6-4 10 23 10 74 0 47-4 81-10 81-5 0-10-16-10-35 0-35 0-35-45-35s-45 0-45 35c0 19-4 35-10 35s-10-34-10-81z"/><path d="M2170 90V10h50c28 0 50 5 50 10 0 6-18 10-40 10h-40v70c0 40-4 70-10 70s-10-33-10-80z"/><path d="M2350 90c-45-89-45-90-27-90 6 1 31 39 55 85 32 64 39 85 27 85-9 0-31-32-55-80z"/></g></svg></span><span class="navbar-brand__name">M√°ster en  Web</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link active" href="/manuel/docs/"><span>Documentaci√≥n</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="/manuel/docs/laravel/"><span>Laravel</span></a>
      </li>
      <li class="nav-item dropdown d-none d-lg-block">
        <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Espa√±ol</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/manuel/en/">English</a></li>
    <li><a class="dropdown-item" href="/manuel/fr/">Franc√©s</a></li>
    </ul>
</div></li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse foldable-nav" id="td-section-nav">
    <div class="td-sidebar-nav__section nav-item dropdown d-block d-lg-none">
      <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Espa√±ol</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/manuel/en/">English</a></li>
    <li><a class="dropdown-item" href="/manuel/fr/">Franc√©s</a></li>
    </ul>
</div>
    </div>
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-manueldocs-li">
  <a href="/manuel/docs/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-manueldocs"><i class="fa-solid fa-screwdriver-wrench"></i><span class="">Documentaci√≥n</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-manueldocslaravel-li">
  <input type="checkbox" id="m-manueldocslaravel-check" checked/>
  <label for="m-manueldocslaravel-check"><a href="/manuel/docs/laravel/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-manueldocslaravel"><i class="fa-brands fa-laravel_"></i><span class="">Laravel</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-manueldocslaravelinstalacion-li">
  <input type="checkbox" id="m-manueldocslaravelinstalacion-check"/>
  <label for="m-manueldocslaravelinstalacion-check"><a href="/manuel/docs/laravel/instalacion/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-manueldocslaravelinstalacion"><span class="">Instalacion y rutas</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-manueldocslaravelcontrolador-li">
  <input type="checkbox" id="m-manueldocslaravelcontrolador-check"/>
  <label for="m-manueldocslaravelcontrolador-check"><a href="/manuel/docs/laravel/controlador/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-manueldocslaravelcontrolador"><span class="">Controlador</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-manueldocslaraveltest-li">
  <input type="checkbox" id="m-manueldocslaraveltest-check" checked/>
  <label for="m-manueldocslaraveltest-check"><a href="/manuel/docs/laravel/test/" class="align-left ps-0  active td-sidebar-link td-sidebar-link__section" id="m-manueldocslaraveltest"><span class="td-sidebar-nav-active-item">Test unitarios</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-manueldocslaraveltestchat-li">
  <input type="checkbox" id="m-manueldocslaraveltestchat-check"/>
  <label for="m-manueldocslaraveltestchat-check"><a href="/manuel/docs/laravel/test/chat/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-manueldocslaraveltestchat"><span class="">Test unitarios del chat</span></a></label>
  
</li>
  </ul>
</li>
  </ul>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            <div class="td-page-meta ms-2 pb-1 pt-2 mb-0">

</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#tipos-de-test-en-laravel">Tipos de test en laravel</a></li>
    <li><a href="#ejecutando-los-test-en-laravel">Ejecutando los test en laravel</a></li>
  </ul>
</nav>
      </div>
    
            

          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/manuel/docs/">Documentaci√≥n</a></li>
  <li class="breadcrumb-item">
    <a href="/manuel/docs/laravel/">Laravel</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    Test unitarios</li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>Test unitarios</h1>
  
	<header class="article-meta">
		
</header>
	<h2 id="tipos-de-test-en-laravel">Tipos de test en laravel</h2>
<p>Realizar test, es <strong>muy importante</strong>. Muchas veces pensamos que como no los necesitamos para que la apliaci√≥n funcione lo dejamos para el final, o simplemente no lo hacemos (para ejemplo yo mismo &#x1f976; )</p>
<p>Laravel ya aporta una estructura de test, que podemos ver en la carpeta correspondiente.
En ella vemos que tenemos dos tipos de test:</p>
<ul>
<li>Feature</li>
</ul>
<blockquote>
<p>Test de caracter√≠sticas d√≥nde se testean diferentes componentes interactuando entre ellos</p>
</blockquote>
<ul>
<li>Unit</li>
</ul>
<blockquote>
<p>Que testean m√©todos concretos del c√≥digo</p>
</blockquote>
<p>*El funcionamiento de los m√©todos creados es el muy parecido. Para esta api, vamos a realizar los test usando los FeatureText</p>
<h2 id="ejecutando-los-test-en-laravel">Ejecutando los test en laravel</h2>
<p>En el terminal escribimos
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>    php artisan test</span></span></code></pre></td></tr></table>
</div>
</div>
Vamos a crear m√©todos para validar cada uno de los 5 m√©todos que tenemos en el controlador


<div class="pageinfo pageinfo-primary">
<p>Un test es un m√©todo que nos va a permitir validar otro m√©todo
En el m√©todo del test, b√°sicamente vamos a hacer 3 acciones
*Invocar al m√©todo que queremos testear pas√°ndole los valores que consideremos
*Comprobar que lo que devuelve ese m√©todo que validamos es lo que esperamos que devuelva
*Informar de ello</p>

</div>

Los test no son infalibles, es decir, nosotros validamos lo que consideramos, por ejemplo si valido un m√©todo de fecha, si le paso una fecha incorrecta, espero que me lo diga, y si es correcta igual, eso me permitir√≠a validar el m√©todo.
Veamos c√≥mo se realizan estas acciones
**1.-  Creamos una clase para el test del api. **
El m√©todo de test, se espera que termine con la palabra Test. Creamos una clase llamada <strong>BookApiTest</strong> para nuestro ejemplo
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>    php artisan make:test BookApiTest</span></span></code></pre></td></tr></table>
</div>
</div>
Empezamos validando el m√©todo <strong>index</strong> para ello vamos a crear un m√©todo
Importante que el m√©todo empiece por la palabra test
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">function</span> <span style="color:#008b45">test_can_get_all_books</span>(): void{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></td></tr></table>
</div>
</div></p>
<p>Pero claro, necesitamos tener la base de datos poblada y comprobar que cuando consultamos obtenemos todos los registros
Pero no queremos tocar la base de datos original, si no que vamos a craar una base de datos para los test, para lo cual vamos a usar la clase (traid) <strong>RefreshDatabase</strong> que nos ofrece Laravel
Creamos una nueva base de datos (tambi√©n podr√≠amos usar sqlite en memoria)
Para configurar la base de datos de test, primero la creamos en nuestro gestor
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 230px">
<img class="card-img-top" src="/manuel/docs/laravel/test/base_datos_test_hu15155752662622886739.png" width="220" height="179">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


creamos la base de datos api_test

</p>
</figcaption>
</figure>

Ahora lo configuramos en el fichero <strong>phpunit.xml</strong>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;php&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;env</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;APP_ENV&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;testing&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;env</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;BCRYPT_ROUNDS&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;4&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;env</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;CACHE_DRIVER&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;array&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">&lt;!-- &lt;env name=&#34;DB_CONNECTION&#34; value=&#34;sqlite&#34;/&gt; --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;env</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;DB_DATABASE&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;api_test&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div>
Para poblar la base de datos de pruebas, vamos a usar el factory que creamos cuando construimos el modelo</p>
<p>Una vez creado, lo invocamos desde el m√©todo credado
Vamos simplemente a crear un libro y visualizarlo
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#228b22">//En el factory
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">function</span> <span style="color:#008b45">definition</span>(): <span style="color:#8b008b;font-weight:bold">array</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> [
</span></span><span style="display:flex;"><span>            <span style="color:#cd5555">&#39;titulo&#39;</span>=&gt;fake()-&gt;<span style="color:#658b00">sentence</span>(),
</span></span><span style="display:flex;"><span>            ];
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">//En el test
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">function</span> <span style="color:#008b45">test_can_get_all_books</span>(): void{
</span></span><span style="display:flex;"><span>        <span style="color:#00688b">$book</span> = Book::<span style="color:#658b00">factory</span>()-&gt;<span style="color:#658b00">create</span>();
</span></span><span style="display:flex;"><span>        dd(<span style="color:#00688b">$book</span>);
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></td></tr></table>
</div>
</div>
Por ejemplo vamos a creaer 4 libros y verificamos que haya 4 libros
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">function</span> <span style="color:#008b45">test_can_get_all_books</span>(): void
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#00688b">$book</span> = Book::<span style="color:#658b00">factory</span>()-&gt;<span style="color:#658b00">count</span>(<span style="color:#b452cd">4</span>)-&gt;<span style="color:#658b00">create</span>();
</span></span><span style="display:flex;"><span>    dd(<span style="color:#00688b">$book</span>-&gt;<span style="color:#658b00">count</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></td></tr></table>
</div>
</div>
Ahora vamos a ver lo que retorno si hacemos una solicitud <strong>get</strong>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">function</span> <span style="color:#008b45">test_can_get_all_books</span>(): void
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#00688b">$book</span> = Book::<span style="color:#658b00">factory</span>()-&gt;<span style="color:#658b00">count</span>(<span style="color:#b452cd">4</span>)-&gt;<span style="color:#658b00">create</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#00688b">$this</span>-&gt;<span style="color:#658b00">get</span>(<span style="color:#cd5555">&#34;/api/books&#34;</span>)-&gt;<span style="color:#658b00">dump</span>();
</span></span><span style="display:flex;"><span>}</span></span></code></pre></td></tr></table>
</div>
</div>
Ahora que vemos esto, se tratar√≠a de verficar los libros que nos devuelve son los que hemos creado
Para ello vamos a hacer uns aserci√≥n y verficar que esto funciona.
para ello vamos a recoger la respuesta y vamos a comparar por ejemplo los t√≠tulos de los dos primeros libros recibidos con los t√≠tulos de los dos primeros libros creados.
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">function</span> <span style="color:#008b45">test_can_get_all_books</span>(): void
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#00688b">$book</span> = Book::<span style="color:#658b00">factory</span>()-&gt;<span style="color:#658b00">count</span>(<span style="color:#b452cd">4</span>)-&gt;<span style="color:#658b00">create</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#00688b">$response</span> = <span style="color:#00688b">$this</span>-&gt;<span style="color:#658b00">getJson</span>(route(<span style="color:#cd5555">&#34;books.index&#34;</span>));
</span></span><span style="display:flex;"><span>    <span style="color:#00688b">$response</span>-&gt;<span style="color:#658b00">assertJsonFragment</span>([
</span></span><span style="display:flex;"><span>        <span style="color:#cd5555">&#39;titulo&#39;</span>=&gt;<span style="color:#00688b">$book</span>[<span style="color:#b452cd">0</span>]-&gt;<span style="color:#658b00">titulo</span>
</span></span><span style="display:flex;"><span>    ])
</span></span><span style="display:flex;"><span>    -&gt;<span style="color:#658b00">assertJsonFragment</span>([
</span></span><span style="display:flex;"><span>                <span style="color:#cd5555">&#39;titulo&#39;</span>=&gt;<span style="color:#00688b">$book</span>[<span style="color:#b452cd">1</span>]-&gt;<span style="color:#658b00">titulo</span>
</span></span><span style="display:flex;"><span>    ]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span> 
</span></span></code></pre></td></tr></table>
</div>
</div>
Ejecutamos el test y vemos que funciona
Probar por ejemplo a modificar el m√©todo index y ver que no funciona, por ejemplo si solo retornamos un libre en lugar de todos , o no devolvemos nada &hellip;
**Verificar el m√©todo <strong>show</strong>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#cd5555">/**
</span></span></span><span style="display:flex;"><span><span style="color:#cd5555">* @test
</span></span></span><span style="display:flex;"><span><span style="color:#cd5555">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">function</span> <span style="color:#008b45">can_get_one_book</span>():void{
</span></span><span style="display:flex;"><span>    <span style="color:#00688b">$book</span>=Book::<span style="color:#658b00">factory</span>()-&gt;<span style="color:#658b00">create</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#00688b">$response</span> = <span style="color:#00688b">$this</span>-&gt;<span style="color:#658b00">getJson</span>(route(<span style="color:#cd5555">&#34;books.index&#34;</span>));
</span></span><span style="display:flex;"><span>    <span style="color:#00688b">$response</span>-&gt;<span style="color:#658b00">assertJsonFragment</span>([
</span></span><span style="display:flex;"><span>            <span style="color:#cd5555">&#39;titulo&#39;</span>=&gt;<span style="color:#00688b">$book</span>-&gt;<span style="color:#658b00">titulo</span>
</span></span><span style="display:flex;"><span>    ]);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>* Observa que si ponemos la directiva **@test** ya no hay que hacer que el nombre del m√©todo empiece por la palabra **test**
</span></span><span style="display:flex;"><span>  
</span></span></code></pre></td></tr></table>
</div>
</div>
<strong>Verificar el m√©todo store</strong>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#cd5555">/**
</span></span></span><span style="display:flex;"><span><span style="color:#cd5555">* @test
</span></span></span><span style="display:flex;"><span><span style="color:#cd5555">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">function</span> <span style="color:#008b45">can_crate_book</span>():void{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#00688b">$this</span>-&gt;<span style="color:#658b00">postJson</span>(route(<span style="color:#cd5555">&#39;books.store&#39;</span>),[
</span></span><span style="display:flex;"><span>            <span style="color:#cd5555">&#39;titulo&#39;</span>=&gt;<span style="color:#cd5555">&#34;Mi libro de pruebas&#34;</span>
</span></span><span style="display:flex;"><span>        ])-&gt;<span style="color:#658b00">assertJsonFragment</span>([
</span></span><span style="display:flex;"><span>            <span style="color:#cd5555">&#39;titulo&#39;</span>=&gt;<span style="color:#cd5555">&#34;Mi libro de pruebas&#34;</span>
</span></span><span style="display:flex;"><span>        ]);
</span></span><span style="display:flex;"><span>        <span style="color:#00688b">$this</span>-&gt;<span style="color:#658b00">assertDatabaseHas</span>(<span style="color:#cd5555">&#39;books&#39;</span>,
</span></span><span style="display:flex;"><span>            [<span style="color:#cd5555">&#39;titulo&#39;</span>=&gt;<span style="color:#cd5555">&#34;Mi libro de pruebas&#34;</span>]
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></td></tr></table>
</div>
</div>
En este caso hacemos dos aserciones, podemos ver c√≥mo tanto con solo una, como con dos, funciona correctamente
Vamos a ver c√≥mo podemos tambi√©n validar que si no le pasamos nada, nuestra aplicaci√≥n esparemos que nos de un error. Por ejemplo si quit√°ramos la validaci√≥n en el controlador,
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">function</span> <span style="color:#008b45">can_crate_book</span>():void{
</span></span><span style="display:flex;"><span>    <span style="color:#00688b">$this</span>-&gt;<span style="color:#658b00">postJson</span>(route(<span style="color:#cd5555">&#39;books.store&#39;</span>),[])
</span></span><span style="display:flex;"><span>    -&gt;<span style="color:#658b00">assertJsonValidationErrors</span>(<span style="color:#cd5555">&#39;titulo&#39;</span>);
</span></span><span style="display:flex;"><span>/....</span></span></code></pre></td></tr></table>
</div>
</div>
<strong>Actualizar un libro</strong>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#cd5555">/**
</span></span></span><span style="display:flex;"><span><span style="color:#cd5555">* @test
</span></span></span><span style="display:flex;"><span><span style="color:#cd5555">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">function</span> <span style="color:#008b45">can_update_book</span>():void{
</span></span><span style="display:flex;"><span><span style="color:#00688b">$book</span>=Book::<span style="color:#658b00">factory</span>()-&gt;<span style="color:#658b00">create</span>();
</span></span><span style="display:flex;"><span><span style="color:#00688b">$this</span>-&gt;<span style="color:#658b00">patch</span>(route(<span style="color:#cd5555">&#34;books.update&#34;</span>,<span style="color:#00688b">$book</span>),[
</span></span><span style="display:flex;"><span>            <span style="color:#cd5555">&#39;titulo&#39;</span>=&gt;<span style="color:#cd5555">&#34;Libro editado&#34;</span>
</span></span><span style="display:flex;"><span>            ])-&gt;<span style="color:#658b00">assertJsonFragment</span>([
</span></span><span style="display:flex;"><span>                <span style="color:#cd5555">&#39;titulo&#39;</span>=&gt;<span style="color:#cd5555">&#39;Libro editado&#39;</span>
</span></span><span style="display:flex;"><span>            ]);
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">//Verificamos tambi√©n en la base de datos
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#00688b">$this</span>-&gt;<span style="color:#658b00">assertDatabaseHas</span>(<span style="color:#cd5555">&#39;books&#39;</span>,[
</span></span><span style="display:flex;"><span>                <span style="color:#cd5555">&#39;titulo&#39;</span>=&gt;<span style="color:#cd5555">&#34;Libro editado&#34;</span>
</span></span><span style="display:flex;"><span>            ]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        }</span></span></code></pre></td></tr></table>
</div>
</div>
*Podemos (debemos) de verificar  tambi√©n la validaci√≥n
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#228b22">//Validamos tambi√©n la validaci√≥n
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#00688b">$this</span>-&gt;<span style="color:#658b00">patch</span>(route(<span style="color:#cd5555">&#34;books.update&#34;</span>,<span style="color:#00688b">$book</span>),[])
</span></span><span style="display:flex;"><span>-&gt;<span style="color:#658b00">assertJsonValidationErrors</span>(<span style="color:#cd5555">&#39;titulo&#39;</span>);</span></span></code></pre></td></tr></table>
</div>
</div>
<strong>Borrar un libro</strong>
*En este caso vamos a eliminar un libro y verificar que no existe
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#cd5555">/**
</span></span></span><span style="display:flex;"><span><span style="color:#cd5555">* @test
</span></span></span><span style="display:flex;"><span><span style="color:#cd5555">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">function</span> <span style="color:#008b45">can_delete_book</span>(): void
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#00688b">$book</span> = Book::<span style="color:#658b00">factory</span>()-&gt;<span style="color:#658b00">create</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">//Validamos tambi√©n la validaci√≥n
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#00688b">$respuesta</span> = <span style="color:#00688b">$this</span>-&gt;<span style="color:#658b00">deleteJson</span>(route(<span style="color:#cd5555">&#34;books.destroy&#34;</span>, <span style="color:#00688b">$book</span>), [])
</span></span><span style="display:flex;"><span>            -&gt;<span style="color:#658b00">assertContent</span>(<span style="color:#cd5555">&#34;Se ha borrado &#34;</span>.<span style="color:#00688b">$book</span>-&gt;<span style="color:#658b00">titulo</span>);
</span></span><span style="display:flex;"><span><span style="color:#228b22">//            -&gt;assertNoContent();
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>}</span></span></code></pre></td></tr></table>
</div>
</div></p>

  <div class="section-index">
    
    
    <hr class="panel-line">
        <div class="entry">
                <h5>
                    <a href="/manuel/docs/laravel/test/chat/">Test unitarios del chat</a>
                </h5>
                <p></p>
            </div>
        </div>
</div>

          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Correo del usuario" aria-label="Correo del usuario">
    <a target="_blank" rel="noopener" href="https://example.org/mail" aria-label="Correo del usuario">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/MAlejandroR" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        
      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2024
    <span class="td-footer__authors">@MRomero</span></span><span class="td-footer__all_rights_reserved">Derechos reservados</span><span class="ms-2"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">Pol√≠tica de privacidad</a></span>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/manuel/js/main.js"></script>
<script defer src="/manuel/js/click-to-copy.js" crossorigin="anonymous"></script>
<script src='/manuel/js/tabpane-persist.js'></script>

  </body>
</html>